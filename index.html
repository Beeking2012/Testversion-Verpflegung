<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Feldk√ºche - SEG Verpflegung</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Arial', sans-serif;
            line-height: 1.6;
            background-color: #f5f5f5;
            color: #333;
        }

        /* Kopfleiste */
        .navbar {
            background: #2c3e50;
            color: white;
            padding: 1rem 0;
            position: fixed;
            width: 100%;
            top: 0;
            z-index: 1000;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        }

        .nav-container {
            max-width: 1200px;
            margin: 0 auto;
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 0 2rem;
        }

        .nav-title {
            font-size: 1.5rem;
            font-weight: bold;
        }

        .nav-links {
            display: flex;
            gap: 2rem;
        }

        .nav-link {
            color: white;
            text-decoration: none;
            padding: 0.5rem 1rem;
            border-radius: 4px;
            transition: background-color 0.3s;
        }

        .nav-link:hover,
        .nav-link.active {
            background-color: #34495e;
        }

        /* Hauptinhalt */
        .content {
            margin-top: 80px;
            min-height: calc(100vh - 80px);
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 2rem;
        }

        /* Filter-Sektion */
        .filter-section {
            background: white;
            padding: 1.5rem;
            border-radius: 8px;
            margin-bottom: 2rem;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
            display: flex;
            gap: 2rem;
            flex-wrap: wrap;
            align-items: end;
        }

        .filter-group {
            display: flex;
            flex-direction: column;
            gap: 0.5rem;
        }

        .filter-group label {
            font-weight: bold;
            font-size: 0.9rem;
        }

        select, input[type="number"], input[type="text"], input[type="date"] {
            padding: 0.5rem;
            border: 1px solid #ddd;
            border-radius: 4px;
            font-size: 1rem;
        }

        .personen-input {
            background: white;
            padding: 1.5rem;
            border-radius: 8px;
            margin-bottom: 2rem;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        }

        .personen-input label {
            font-weight: bold;
            margin-right: 1rem;
        }

        .personen-input input {
            width: 120px;
        }

        /* Rezepte Grid */
        .rezepte-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 1.5rem;
            margin-bottom: 2rem;
        }

        .rezept-karte {
            background: white;
            border-radius: 8px;
            padding: 1.5rem;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
            cursor: pointer;
            transition: transform 0.3s, box-shadow 0.3s;
            border: 2px solid transparent;
        }

        .rezept-karte:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 15px rgba(0,0,0,0.15);
        }

        .rezept-karte.ausgewaehlt {
            border-color: #3498db;
            background-color: #f8f9fa;
        }

        .rezept-karte h4 {
            color: #2c3e50;
            margin-bottom: 0.5rem;
        }

        .rezept-info {
            display: flex;
            gap: 1rem;
            font-size: 0.9rem;
            color: #666;
            margin-bottom: 0.5rem;
            flex-wrap: wrap;
        }

        .rezept-beschreibung {
            font-size: 0.9rem;
            color: #555;
            margin-bottom: 0.5rem;
        }

        /* Rezept Details */
        .rezept-details {
            background: white;
            border-radius: 8px;
            padding: 2rem;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
            margin-bottom: 2rem;
        }

        .rezept-header {
            border-bottom: 2px solid #ecf0f1;
            padding-bottom: 1rem;
            margin-bottom: 2rem;
        }

        .rezept-header h3 {
            color: #2c3e50;
            font-size: 1.8rem;
            margin-bottom: 1rem;
        }

        .rezept-meta {
            display: flex;
            gap: 2rem;
            font-size: 0.9rem;
            color: #7f8c8d;
            flex-wrap: wrap;
        }

        .rezept-content {
            display: grid;
            grid-template-columns: 1fr 2fr;
            gap: 3rem;
        }

        .zutaten-section h4,
        .zubereitung-section h4,
        .portionierung-section h4 {
            color: #2c3e50;
            margin-bottom: 1rem;
            font-size: 1.2rem;
        }

        .zutaten-section h4 {
            border-bottom: 2px solid #3498db;
            padding-bottom: 0.5rem;
        }

        .zutaten-section ul {
            list-style: none;
            padding: 0;
        }

        .zutaten-section li {
            padding: 0.75rem 0;
            border-bottom: 1px solid #ecf0f1;
            font-size: 1rem;
        }

        .zutaten-section li:last-child {
            border-bottom: none;
        }

        .zubereitung-section ol {
            padding-left: 1.5rem;
        }

        .zubereitung-section li {
            padding: 0.75rem 0;
            margin-bottom: 0.5rem;
            line-height: 1.6;
            border-bottom: 1px solid #f8f9fa;
        }

        .portionierung-section {
            grid-column: 1 / -1;
            background: #e8f4f8;
            padding: 1.5rem;
            border-radius: 6px;
            margin-top: 1rem;
            border-left: 4px solid #3498db;
        }

        .portionierung-section h4 {
            color: #2c3e50;
            margin-bottom: 0.5rem;
        }

        .portionierung-section p {
            line-height: 1.6;
            margin: 0;
        }

        .rezept-actions {
            display: flex;
            gap: 1rem;
            margin-top: 2rem;
            padding-top: 2rem;
            border-top: 2px solid #ecf0f1;
        }

        button {
            background: #3498db;
            color: white;
            border: none;
            padding: 0.75rem 1.5rem;
            border-radius: 4px;
            cursor: pointer;
            font-size: 1rem;
            transition: background-color 0.3s;
        }

        button:hover {
            background: #2980b9;
        }

        button.secondary {
            background: #95a5a6;
        }

        button.secondary:hover {
            background: #7f8c8d;
        }

        button.success {
            background: #27ae60;
        }

        button.success:hover {
            background: #219a52;
        }

        button.warning {
            background: #e67e22;
        }

        button.warning:hover {
            background: #d35400;
        }

        button.danger {
            background: #e74c3c;
        }

        button.danger:hover {
            background: #c0392b;
        }

        /* Einkaufsliste */
        .einkaufsliste-optionen {
            background: white;
            padding: 1.5rem;
            border-radius: 8px;
            margin-bottom: 2rem;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
            display: flex;
            gap: 2rem;
            flex-wrap: wrap;
            align-items: center;
        }

        .einkaufsliste-optionen label {
            font-weight: bold;
            display: flex;
            align-items: center;
            gap: 0.5rem;
            cursor: pointer;
        }

        .einkaufsliste-optionen input[type="radio"] {
            margin: 0;
        }

        .einkaufsliste-info {
            background: white;
            padding: 1.5rem;
            border-radius: 8px;
            margin-bottom: 2rem;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-wrap: wrap;
            gap: 1rem;
        }

        .einkaufsliste-info p {
            margin: 0;
            font-size: 1.1rem;
        }

        .einkaufsliste-info p strong {
            color: #2c3e50;
        }

        .einkaufsliste-container {
            background: white;
            border-radius: 8px;
            padding: 1.5rem;
            margin-bottom: 1.5rem;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        }

        .einkaufsliste-container h3 {
            color: #2c3e50;
            margin-bottom: 1rem;
            border-bottom: 2px solid #ecf0f1;
            padding-bottom: 0.5rem;
        }

        .einkaufsliste-item {
            display: flex;
            justify-content: space-between;
            padding: 0.75rem 0;
            border-bottom: 1px solid #ecf0f1;
            align-items: center;
        }

        .einkaufsliste-item:last-child {
            border-bottom: none;
        }

        .einkaufsliste-item span:first-child {
            font-weight: 500;
        }

        .einkaufsliste-item span:last-child {
            color: #3498db;
            font-weight: bold;
        }

        .einkaufsliste-item.aus-lager {
            background-color: #e8f6f3;
            border-left: 4px solid #27ae60;
            padding-left: 1rem;
        }

        .einkaufsliste-item.aus-lager span:first-child {
            text-decoration: line-through;
            color: #7f8c8d;
        }

        .einkaufsliste-item.aus-lager::after {
            content: "‚úì Aus Lager";
            background: #27ae60;
            color: white;
            padding: 0.25rem 0.5rem;
            border-radius: 12px;
            font-size: 0.8rem;
            margin-left: 1rem;
        }

        /* NEUE CSS-KLASSEN f√ºr teilweise Lagerdeckung */
        .einkaufsliste-item.teilweise-aus-lager {
            background-color: #fff3cd;
            border-left: 4px solid #ffc107;
            padding-left: 1rem;
        }

        .einkaufsliste-item.teilweise-aus-lager::after {
            content: "‚úì Teilweise aus Lager";
            background: #ffc107;
            color: #212529;
            padding: 0.25rem 0.5rem;
            border-radius: 12px;
            font-size: 0.8rem;
            margin-left: 1rem;
            font-weight: bold;
        }

        .lager-details {
            font-size: 0.8rem;
            color: #666;
            margin-top: 0.25rem;
        }

        .lager-details .aus-lager {
            color: #27ae60;
            font-weight: bold;
        }

        .lager-details .zu-kaufen {
            color: #e74c3c;
            font-weight: bold;
        }

        .lager-hinweis {
            background: #e8f4f8;
            padding: 1rem;
            border-radius: 6px;
            margin-top: 1rem;
            border-left: 4px solid #3498db;
            font-size: 0.9rem;
        }

        /* Lager-Styles */
        .lager-tabs {
            display: flex;
            margin-bottom: 1rem;
            border-bottom: 2px solid #ecf0f1;
        }

        .lager-tab {
            padding: 1rem 2rem;
            background: #f8f9fa;
            border: none;
            cursor: pointer;
            font-size: 1rem;
            border-bottom: 3px solid transparent;
            transition: all 0.3s;
        }

        .lager-tab.active {
            background: white;
            border-bottom-color: #3498db;
            font-weight: bold;
        }

        .lager-tab.lebensmittel.active {
            border-bottom-color: #27ae60;
        }

        .lager-tab.material.active {
            border-bottom-color: #e67e22;
        }

        .lager-controls {
            background: white;
            padding: 1.5rem;
            border-radius: 8px;
            margin-bottom: 2rem;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
            display: flex;
            gap: 1rem;
            flex-wrap: wrap;
        }

        .lager-form {
            display: flex;
            gap: 1rem;
            flex-wrap: wrap;
            align-items: end;
            flex: 1;
        }

        .form-group {
            display: flex;
            flex-direction: column;
            gap: 0.5rem;
        }

        .form-group label {
            font-weight: bold;
            font-size: 0.9rem;
        }

        .lager-table {
            background: white;
            border-radius: 8px;
            overflow: hidden;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
            margin-bottom: 2rem;
        }

        .lager-table table {
            width: 100%;
            border-collapse: collapse;
        }

        .lager-table th,
        .lager-table td {
            padding: 1rem;
            text-align: left;
            border-bottom: 1px solid #ecf0f1;
        }

        .lager-table th {
            background: #34495e;
            color: white;
            font-weight: 600;
        }

        .lager-table tr:hover {
            background: #f8f9fa;
        }

        .lager-table .low-stock {
            background: #ffeaa7;
        }

        .lager-table .critical-stock {
            background: #fab1a0;
        }

        .lager-table .expired {
            background: #ff7675;
        }

        .lager-table .expiring-soon {
            background: #ffeaa7;
        }

        .lager-actions {
            display: flex;
            gap: 0.5rem;
        }

        .lager-actions button {
            padding: 0.4rem 0.8rem;
            font-size: 0.8rem;
        }

        .menge-input {
            width: 80px;
            padding: 0.3rem;
            border: 1px solid #ddd;
            border-radius: 4px;
            text-align: center;
        }

        .lager-stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 1rem;
            margin-bottom: 2rem;
        }

        .stat-card {
            background: white;
            padding: 1.5rem;
            border-radius: 8px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
            text-align: center;
        }

        .stat-card h3 {
            color: #2c3e50;
            margin-bottom: 0.5rem;
            font-size: 1.1rem;
        }

        .stat-card .number {
            font-size: 2rem;
            font-weight: bold;
            color: #3498db;
        }

        .stat-card.warning .number {
            color: #e67e22;
        }

        .stat-card.critical .number {
            color: #e74c3c;
        }

        .keine-rezepte {
            text-align: center;
            padding: 2rem;
            background: white;
            border-radius: 8px;
            color: #666;
        }

        /* Seiten werden standardm√§√üig ausgeblendet */
        .page {
            display: none;
        }

        /* Nur die aktive Seite wird angezeigt */
        .page.active {
            display: block;
        }

        /* DRUCK-STYLES */
        @media print {
            body * {
                visibility: hidden;
            }
            
            #druck-rezept-container,
            #druck-einkaufsliste-container,
            #druck-rezept-container *,
            #druck-einkaufsliste-container * {
                visibility: visible !important;
                display: block !important;
            }
            
            #druck-rezept-container,
            #druck-einkaufsliste-container {
                position: absolute !important;
                left: 0 !important;
                top: 0 !important;
                width: 100% !important;
                background: white !important;
                margin: 0 !important;
                padding: 0 !important;
            }
            
            .navbar,
            .rezept-actions,
            .einkaufsliste-info,
            .filter-section,
            .personen-input,
            .rezepte-grid,
            .rezept-details,
            #einkaufsliste-content,
            .container {
                display: none !important;
                visibility: hidden !important;
            }
            
            body {
                background: white !important;
                font-size: 10pt !important;
                margin: 0 !important;
                padding: 0 !important;
            }
            
            h1, h2, h3 {
                color: #000 !important;
                page-break-after: avoid;
            }
            
            table {
                page-break-inside: avoid;
            }
            
            ol, ul {
                page-break-inside: avoid;
            }
        }

        .druck-container {
            display: none;
        }

        /* Responsive Design */
        @media (max-width: 768px) {
            .nav-container {
                flex-direction: column;
                gap: 1rem;
            }
            
            .container {
                padding: 1rem;
            }
            
            .filter-section {
                flex-direction: column;
                align-items: stretch;
            }
            
            .rezept-content {
                grid-template-columns: 1fr;
                gap: 2rem;
            }
            
            .rezepte-grid {
                grid-template-columns: 1fr;
            }
            
            .einkaufsliste-info {
                flex-direction: column;
                align-items: stretch;
                text-align: center;
            }
            
            .rezept-actions {
                flex-direction: column;
            }
            
            .rezept-meta {
                flex-direction: column;
                gap: 0.5rem;
            }
            
            .lager-form {
                flex-direction: column;
                align-items: stretch;
            }
            
            .lager-table {
                overflow-x: auto;
            }
            
            .lager-actions {
                flex-direction: column;
            }
            
            .lager-tabs {
                flex-direction: column;
            }
            
            .lager-tab {
                padding: 0.75rem 1rem;
            }
            
            .einkaufsliste-optionen {
                flex-direction: column;
                align-items: stretch;
                gap: 1rem;
            }
        }
        
        @media (max-width: 480px) {
            .nav-title {
                font-size: 1.2rem;
            }
            
            .nav-links {
                gap: 1rem;
            }
            
            .nav-link {
                padding: 0.4rem 0.8rem;
                font-size: 0.9rem;
            }
            
            .container {
                padding: 0.5rem;
            }
            
            .rezept-karte {
                padding: 1rem;
            }
            
            .rezept-details {
                padding: 1rem;
            }
            
            .rezept-content {
                gap: 1.5rem;
            }
            
            button {
                padding: 0.6rem 1.2rem;
                font-size: 0.9rem;
            }
            
            .lager-stats {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <!-- Kopfleiste -->
    <nav class="navbar">
        <div class="nav-container">
            <h1 class="nav-title">SEG Feldk√ºche</h1>
            <div class="nav-links">
                <a href="#rezepte" class="nav-link active" data-page="rezepte">Rezepte</a>
                <a href="#einkaufsliste" class="nav-link" data-page="einkaufsliste">Einkaufsliste</a>
                <a href="#lager" class="nav-link" data-page="lager">Lager</a>
            </div>
        </div>
    </nav>

    <main class="content">
        <!-- Rezept-Seite -->
        <div id="rezepte" class="page active">
            <div class="container">
                <h2>Rezeptauswahl SEG Verpflegung</h2>
                
                <!-- Filter-Optionen -->
                <div class="filter-section">
                    <div class="filter-group">
                        <label>Verpflegungsart:</label>
                        <select id="verpflegungsart">
                            <option value="">Alle</option>
                            <option value="warm">Warmverpflegung</option>
                            <option value="kalt">Kaltverpflegation</option>
                        </select>
                    </div>
                    
                    <div class="filter-group">
                        <label>Verpflegungstyp:</label>
                        <select id="verpflegungstyp">
                            <option value="">Alle</option>
                            <option value="voll">Vollverpflegung</option>
                            <option value="lunch">Lunchpakete</option>
                            <option value="hand">Handverpflegung</option>
                        </select>
                    </div>
                    
                    <div class="filter-group">
                        <label>
                            <input type="checkbox" id="vegetarisch">
                            Nur vegetarische Rezepte
                        </label>
                    </div>
                </div>

                <!-- Personenanzahl -->
                <div class="personen-input">
                    <label for="personen">Personenanzahl:</label>
                    <input type="number" id="personen" min="1" max="400" value="50">
                    <small>Basis: 50 Personen f√ºr SEG-Einsatz</small>
                </div>

                <!-- Rezepte Grid -->
                <div class="rezepte-grid" id="rezepte-grid">
                    <!-- Rezepte werden hier dynamisch eingef√ºgt -->
                </div>

                <!-- Ausgew√§hltes Rezept -->
                <div id="rezept-details" class="rezept-details" style="display: none;">
                    <div class="rezept-header">
                        <h3 id="rezept-titel"></h3>
                        <div class="rezept-meta">
                            <span id="rezept-kalorien"></span>
                            <span id="rezept-zubereitungszeit"></span>
                            <span id="rezept-art"></span>
                        </div>
                    </div>
                    
                    <div class="rezept-content">
                        <div class="zutaten-section">
                            <h4>Zutaten f√ºr <span id="zutaten-personen">50</span> Personen</h4>
                            <ul id="rezept-zutaten"></ul>
                        </div>
                        
                        <div class="zubereitung-section">
                            <h4>Zubereitung</h4>
                            <ol id="rezept-zubereitung"></ol>
                        </div>
                        
                        <div class="portionierung-section">
                            <h4>Portionierung & Getr√§nke</h4>
                            <p id="rezept-portionierung"></p>
                        </div>
                    </div>
                    
                    <div class="rezept-actions">
                        <button onclick="exportRezeptPDF()">Rezept als PDF exportieren</button>
                        <button onclick="zurEinkaufsliste()">Zur Einkaufsliste</button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Einkaufsliste-Seite -->
        <div id="einkaufsliste" class="page">
            <div class="container">
                <h2>Einkaufsliste</h2>
                
                <!-- Einkaufslisten-Optionen -->
                <div class="einkaufsliste-optionen">
                    <label>
                        <input type="radio" name="lager-option" value="alles-kaufen" checked onchange="aktualisiereEinkaufsliste()">
                        Alles neu kaufen (Lager ignorieren)
                    </label>
                    <label>
                        <input type="radio" name="lager-option" value="lager-verwenden" onchange="aktualisiereEinkaufsliste()">
                        Lager verwenden (Vorhandenes abziehen)
                    </label>
                </div>
                
                <div class="einkaufsliste-info">
                    <p>F√ºr <span id="einkauf-personen">50</span> Personen | 
                       <strong id="einkauf-rezept-titel">Kein Rezept ausgew√§hlt</strong>
                    </p>
                    <div>
                        <button onclick="exportEinkaufslistePDF()">Einkaufsliste als PDF exportieren</button>
                        <button onclick="showPage('rezepte')">Zur√ºck zu Rezepten</button>
                    </div>
                </div>
                
                <div id="einkaufsliste-content">
                    <p>Bitte w√§hle zuerst ein Rezept auf der Rezept-Seite aus.</p>
                </div>
            </div>
        </div>

        <!-- Lager-Seite -->
        <div id="lager" class="page">
            <div class="container">
                <h2>Lagerverwaltung</h2>
                
                <!-- Lager-Tabs -->
                <div class="lager-tabs">
                    <button class="lager-tab lebensmittel active" onclick="wechselLagerTab('lebensmittel')">üçΩÔ∏è Lebensmittel</button>
                    <button class="lager-tab material" onclick="wechselLagerTab('material')">üõ†Ô∏è Material</button>
                </div>
                
                <!-- Lager-Statistiken -->
                <div class="lager-stats" id="lager-stats">
                    <!-- Statistiken werden dynamisch eingef√ºgt -->
                </div>

                <!-- Lager-Controls -->
                <div class="lager-controls">
                    <div class="lager-form" id="lager-form">
                        <!-- Formular wird je nach Tab dynamisch eingef√ºgt -->
                    </div>
                </div>

                <!-- Lager-Tabelle -->
                <div class="lager-table">
                    <table>
                        <thead id="lager-table-header">
                            <!-- Tabellenkopf wird dynamisch eingef√ºgt -->
                        </thead>
                        <tbody id="lager-tabelle">
                            <!-- Lagerdaten werden dynamisch eingef√ºgt -->
                        </tbody>
                    </table>
                </div>

                <!-- Lager-Aktionen -->
                <div class="rezept-actions">
                    <button onclick="lagerExportieren()">Aktuelles Lager als CSV exportieren</button>
                    <button class="secondary" onclick="lagerImportieren()">Lager importieren</button>
                    <button class="warning" onclick="lagerLeeren()">Aktuelles Lager zur√ºcksetzen</button>
                </div>

                <!-- Cloud-Synchronisation -->
                <div class="cloud-actions" style="margin-top: 2rem; padding: 1.5rem; background: #f8f9fa; border-radius: 8px; border: 2px solid #3498db;">
                    <h3 style="color: #2c3e50; margin-bottom: 1rem;">‚òÅÔ∏è Cloud-Synchronisation</h3>
                    <div style="display: flex; gap: 1rem; flex-wrap: wrap;">
                        <button onclick="cloudSpeichern()" style="background: #3498db; color: white; border: none; padding: 0.75rem 1.5rem; border-radius: 4px; cursor: pointer; font-size: 1rem;">
                            üì± In Cloud speichern
                        </button>
                        <button onclick="cloudLaden()" style="background: #27ae60; color: white; border: none; padding: 0.75rem 1.5rem; border-radius: 4px; cursor: pointer; font-size: 1rem;">
                            ‚¨áÔ∏è Aus Cloud laden
                        </button>
                        <button onclick="cloudStatusPr√ºfen()" style="background: #f39c12; color: white; border: none; padding: 0.75rem 1.5rem; border-radius: 4px; cursor: pointer; font-size: 1rem;">
                            üîÑ Sync-Status pr√ºfen
                        </button>
                    </div>
                    <div id="cloud-status" style="margin-top: 1rem; font-size: 0.9rem; color: #666;"></div>
                </div>
            </div>
        </div>
    </main>

    <!-- Versteckte Druck-Container -->
    <div id="druck-rezept-container" class="druck-container" style="display: none;"></div>
    <div id="druck-einkaufsliste-container" class="druck-container" style="display: none;"></div>

    <!-- Versteckter Datei-Input f√ºr Import -->
    <input type="file" id="lager-import-file" accept=".csv" style="display: none;">

    <script>
        // Upstash Redis Konfiguration
        const UPSTASH_CONFIG = {
            URL: "https://helping-cougar-30935.upstash.io",
            TOKEN: "AXjXAAIncDJhNzc0OTViMWEwZGI0MDdlYmRjNWFhOTYxYjRmNjVhYXAyMzA5MzU",
            READ_ONLY_TOKEN: "AnjXAAIgcDKLfeRS33kEwLSXH-5rwwYziTlTxrIHmmAT-n9rbo_Elg"
        };

        // Rezepte Daten (3 Rezepte als Demo)
        const rezepteDaten = [
            {
            id: 1,
            titel: "SEG-Eintopf mit Rindfleisch",
            beschreibung: "Kraftvoller Eintopf f√ºr kalte Einsatztage",
            verpflegungsart: "warm",
            verpflegungstyp: "voll",
            vegetarisch: false,
            kalorien: 650,
            basisZeit: 60,
            zutaten: [
                { menge: 4000, einheit: "g", name: "Rindfleisch, gew√ºrfelt" },
                { menge: 6000, einheit: "g", name: "Kartoffeln, gew√ºrfelt" },
                { menge: 2000, einheit: "g", name: "Karotten, in Scheiben" },
                { menge: 1000, einheit: "g", name: "Zwiebeln, gew√ºrfelt" },
                { menge: 500, einheit: "g", name: "Sellerie, gew√ºrfelt" },
                { menge: 200, einheit: "g", name: "Tomatenmark" },
                { menge: 15, einheit: "l", name: "Rinderbr√ºhe" },
                { menge: 80, einheit: "g", name: "Paprikapulver" },
                { menge: 30, einheit: "g", name: "Majoran" },
                { menge: 200, einheit: "ml", name: "√ñl" },
                { menge: 80, einheit: "g", name: "Salz" },
                { menge: 20, einheit: "g", name: "Pfeffer" }
            ],
            zubereitung: [
                "Rindfleisch in gro√üen Bratent√∂pfen portionsweise scharf anbraten",
                "Zwiebeln und Sellerie im Bratfond glasig d√ºnsten",
                "Tomatenmark zugeben und kurz mitr√∂sten",
                "Fleisch zur√ºck in den Topf geben, mit Br√ºhe abl√∂schen",
                "Kartoffeln und Karotten hinzuf√ºgen, aufkochen lassen",
                "Bei mittlerer Hitze 45 Minuten k√∂cheln lassen",
                "Gew√ºrze zugeben und weitere 15 Minuten garen",
                "Mit Salz und Pfeffer abschmecken"
            ],
            portionierung: "In Feldk√ºchen-Sch√ºsseln portionieren. Pro Person ca. 500ml Eintopf. Dazu 1 Liter Getr√§nke pro Person (Wasser, Apfelschorle im Verh√§ltnis 1:3). Mit frischem Brot servieren."
        },
        {
            id: 2,
            titel: "Nudelpfanne mit Gem√ºse und H√§hnchen",
            beschreibung: "Schnelle Nudelpfanne f√ºr den Einsatz",
            verpflegungsart: "warm",
            verpflegungstyp: "voll",
            vegetarisch: false,
            kalorien: 580,
            basisZeit: 35,
            zutaten: [
                { menge: 5000, einheit: "g", name: "Nudeln (Spiralnudeln)" },
                { menge: 4000, einheit: "g", name: "H√§hnchenbrust, gew√ºrfelt" },
                { menge: 2000, einheit: "g", name: "Zucchini, in Scheiben" },
                { menge: 1500, einheit: "g", name: "Paprika, gew√ºrfelt" },
                { menge: 1000, einheit: "g", name: "Zwiebeln, gew√ºrfelt" },
                { menge: 400, einheit: "g", name: "Tomatenmark" },
                { menge: 300, einheit: "ml", name: "Sojasauce" },
                { menge: 150, einheit: "ml", name: "√ñl" },
                { menge: 50, einheit: "g", name: "Knoblauch, gehackt" },
                { menge: 60, einheit: "g", name: "Salz" },
                { menge: 20, einheit: "g", name: "Pfeffer" },
                { menge: 40, einheit: "g", name: "Paprikapulver" }
            ],
            zubereitung: [
                "Nudeln in gro√üen T√∂pfen bissfest kochen, abgie√üen",
                "H√§hnchen in Bratpfannen goldbraun anbraten",
                "Zwiebeln und Knoblauch in √ñl anschwitzen",
                "Paprika und Zucchini zugeben, 5 Minuten braten",
                "Tomatenmark und Gew√ºrze zugeben, kurz mitr√∂sten",
                "Gekochte Nudeln und H√§hnchen unterheben",
                "Mit Sojasauce abschmecken, alles gut vermengen"
            ],
            portionierung: "In w√§rmeisolierten Beh√§ltern portionieren. Pro Person ca. 400g Nudelpfanne. Dazu 1 Liter Getr√§nke pro Person (Wasser, Tee)."
        },
        {
            id: 3,
            titel: "Kartoffel-Gem√ºse-Pfanne mit W√ºrstchen",
            beschreibung: "S√§ttigende Pfanne mit Kartoffeln und Gem√ºse",
            verpflegungsart: "warm",
            verpflegungstyp: "voll",
            vegetarisch: false,
            kalorien: 620,
            basisZeit: 45,
            zutaten: [
                { menge: 6000, einheit: "g", name: "Kartoffeln, gew√ºrfelt" },
                { menge: 3000, einheit: "g", name: "Wiener W√ºrstchen, in Scheiben" },
                { menge: 2000, einheit: "g", name: "Zwiebeln, gew√ºrfelt" },
                { menge: 1500, einheit: "g", name: "Paprika, gew√ºrfelt" },
                { menge: 1000, einheit: "g", name: "Zucchini, gew√ºrfelt" },
                { menge: 500, einheit: "g", name: "Tomatenmark" },
                { menge: 200, einheit: "ml", name: "√ñl" },
                { menge: 80, einheit: "g", name: "Salz" },
                { menge: 30, einheit: "g", name: "Pfeffer" },
                { menge: 40, einheit: "g", name: "Paprikapulver" },
                { menge: 20, einheit: "g", name: "Majoran" }
            ],
            zubereitung: [
                "Kartoffeln vorkochen, abk√ºhlen lassen und w√ºrfeln",
                "Zwiebeln in √ñl glasig d√ºnsten",
                "Kartoffelw√ºrfel zugeben und goldbraun braten",
                "W√ºrstchenscheiben zugeben und mitbraten",
                "Gem√ºse zugeben und 10 Minuten mitd√ºnsten",
                "Tomatenmark und Gew√ºrze unterr√ºhren",
                "Bei mittlerer Hitze 15 Minuten garen lassen"
            ],
            portionierung: "Pro Person ca. 450g Pfanne. Dazu Senf und Ketchup bereitstellen. Getr√§nke: Wasser und Tee."
        },
        {
            id: 4,
            titel: "Linseneintopf mit R√§uchertofu",
            beschreibung: "Vegetarischer Eintopf mit w√ºrzigem R√§uchertofu",
            verpflegungsart: "warm",
            verpflegungstyp: "voll",
            vegetarisch: true,
            kalorien: 520,
            basisZeit: 50,
            zutaten: [
                { menge: 3000, einheit: "g", name: "R√§uchertofu, gew√ºrfelt" },
                { menge: 2000, einheit: "g", name: "Rote Linsen" },
                { menge: 3000, einheit: "g", name: "Kartoffeln, gew√ºrfelt" },
                { menge: 1500, einheit: "g", name: "Karotten, in Scheiben" },
                { menge: 1000, einheit: "g", name: "Zwiebeln, gew√ºrfelt" },
                { menge: 500, einheit: "g", name: "Sellerie, gew√ºrfelt" },
                { menge: 12, einheit: "l", name: "Gem√ºsebr√ºhe" },
                { menge: 150, einheit: "ml", name: "√ñl" },
                { menge: 80, einheit: "g", name: "Salz" },
                { menge: 25, einheit: "g", name: "Pfeffer" },
                { menge: 30, einheit: "g", name: "K√ºmmel" },
                { menge: 20, einheit: "g", name: "Majoran" }
            ],
            zubereitung: [
                "R√§uchertofu in √ñl knusprig anbraten",
                "Zwiebeln und Sellerie zugeben und glasig d√ºnsten",
                "Linsen waschen und zugeben",
                "Mit Gem√ºsebr√ºhe abl√∂schen",
                "Kartoffeln und Karotten zugeben",
                "30 Minuten k√∂cheln lassen",
                "Gew√ºrze zugeben und abschmecken"
            ],
            portionierung: "Pro Person ca. 500ml Eintopf. Dazu Brot und 1 Liter Getr√§nke pro Person."
        },
        {
            id: 5,
            titel: "Chili con Carne",
            beschreibung: "W√ºrziges Chili mit Rindfleisch und Bohnen",
            verpflegungsart: "warm",
            verpflegungstyp: "voll",
            vegetarisch: false,
            kalorien: 680,
            basisZeit: 60,
            zutaten: [
                { menge: 4000, einheit: "g", name: "Rinderhackfleisch" },
                { menge: 4000, einheit: "g", name: "Kidneybohnen, Dose" },
                { menge: 2000, einheit: "g", name: "Mais, Dose" },
                { menge: 2000, einheit: "g", name: "Zwiebeln, gew√ºrfelt" },
                { menge: 1000, einheit: "g", name: "Paprika, gew√ºrfelt" },
                { menge: 800, einheit: "g", name: "Tomatenmark" },
                { menge: 4, einheit: "Dosen", name: "St√ºcktomaten" },
                { menge: 100, einheit: "g", name: "Chilipulver" },
                { menge: 50, einheit: "g", name: "Kreuzk√ºmmel" },
                { menge: 80, einheit: "g", name: "Salz" },
                { menge: 200, einheit: "ml", name: "√ñl" }
            ],
            zubereitung: [
                "Hackfleisch in √ñl kr√ºmelig anbraten",
                "Zwiebeln und Paprika zugeben und mitd√ºnsten",
                "Tomatenmark zugeben und kurz anr√∂sten",
                "St√ºcktomaten zugeben, zerdr√ºcken",
                "Gew√ºrze zugeben, 30 Minuten k√∂cheln",
                "Bohnen und Mais zugeben, weitere 15 Minuten garen"
            ],
            portionierung: "Pro Person ca. 450g Chili. Dazu Reis oder Brot. Getr√§nke: Wasser und Apfelschorle."
        },
        {
            id: 6,
            titel: "Gem√ºsecurry mit Reis",
            beschreibung: "Mildes Gem√ºsecurry nach asiatischer Art",
            verpflegungsart: "warm",
            verpflegungstyp: "voll",
            vegetarisch: true,
            kalorien: 550,
            basisZeit: 40,
            zutaten: [
                { menge: 4000, einheit: "g", name: "Reis" },
                { menge: 3000, einheit: "g", name: "Brokkoli" },
                { menge: 2000, einheit: "g", name: "Karotten, in Streifen" },
                { menge: 1500, einheit: "g", name: "Paprika, in Streifen" },
                { menge: 1000, einheit: "g", name: "Zucchini, in Scheiben" },
                { menge: 1000, einheit: "g", name: "Zwiebeln, gew√ºrfelt" },
                { menge: 400, einheit: "ml", name: "Kokosmilch" },
                { menge: 200, einheit: "g", name: "Currypaste (mild)" },
                { menge: 150, einheit: "ml", name: "√ñl" },
                { menge: 60, einheit: "g", name: "Salz" },
                { menge: 20, einheit: "g", name: "Pfeffer" }
            ],
            zubereitung: [
                "Reis nach Packungsanleitung kochen",
                "Zwiebeln in √ñl glasig d√ºnsten",
                "Currypaste zugeben und kurz anr√∂sten",
                "Hartes Gem√ºse zugeben und 5 Minuten d√ºnsten",
                "Weiches Gem√ºse zugeben, mit Kokosmilch abl√∂schen",
                "15 Minuten k√∂cheln lassen, mit Salz und Pfeffer abschmecken"
            ],
            portionierung: "Pro Person 200g Reis und 300g Curry. Getr√§nke: Wasser und Tee."
        },
        {
            id: 7,
            titel: "Gulaschsuppe nach ungarischer Art",
            beschreibung: "W√ºrzige, kr√§ftige Gulaschsuppe",
            verpflegungsart: "warm",
            verpflegungstyp: "voll",
            vegetarisch: false,
            kalorien: 620,
            basisZeit: 75,
            zutaten: [
                { menge: 5000, einheit: "g", name: "Rindfleisch f√ºr Gulasch" },
                { menge: 4000, einheit: "g", name: "Kartoffeln, gew√ºrfelt" },
                { menge: 2000, einheit: "g", name: "Zwiebeln, gew√ºrfelt" },
                { menge: 1500, einheit: "g", name: "Paprika, in Streifen" },
                { menge: 300, einheit: "g", name: "Tomatenmark" },
                { menge: 12, einheit: "l", name: "Rinderbr√ºhe" },
                { menge: 100, einheit: "g", name: "Paprikapulver" },
                { menge: 30, einheit: "g", name: "K√ºmmel" },
                { menge: 200, einheit: "ml", name: "√ñl" },
                { menge: 80, einheit: "g", name: "Salz" },
                { menge: 25, einheit: "g", name: "Pfeffer" }
            ],
            zubereitung: [
                "Zwiebeln in √ñl glasig d√ºnsten",
                "Rindfleisch zugeben und kr√§ftig anbraten",
                "Paprikapulver zugeben, kurz mitr√∂sten",
                "Mit Br√ºhe abl√∂schen, 45 Minuten k√∂cheln",
                "Kartoffeln und Paprika zugeben, weitere 20 Minuten garen",
                "Mit Gew√ºrzen abschmecken"
            ],
            portionierung: "Pro Person ca. 500ml Suppe. Dazu frisches Brot servieren."
        },
        {
            id: 8,
            titel: "K√§sesp√§tzle mit R√∂stzwiebeln",
            beschreibung: "Schw√§bische Spezialit√§t f√ºr die Feldk√ºche",
            verpflegungsart: "warm",
            verpflegungstyp: "voll",
            vegetarisch: true,
            kalorien: 720,
            basisZeit: 35,
            zutaten: [
                { menge: 6000, einheit: "g", name: "Sp√§tzle, fertig" },
                { menge: 2000, einheit: "g", name: "Bergk√§se, gerieben" },
                { menge: 500, einheit: "g", name: "Butter" },
                { menge: 300, einheit: "g", name: "R√∂stzwiebeln" },
                { menge: 500, einheit: "ml", name: "Sahne" },
                { menge: 60, einheit: "g", name: "Salz" },
                { menge: 20, einheit: "g", name: "Muskat" },
                { menge: 30, einheit: "g", name: "Pfeffer" }
            ],
            zubereitung: [
                "Sp√§tzle in Salzwasser bissfest kochen, abgie√üen",
                "Butter in gro√üen Pfannen schmelzen",
                "Sp√§tzle darin goldgelb braten",
                "Sahne und K√§se zugeben, schmelzen lassen",
                "Mit Muskat, Salz und Pfeffer w√ºrzen",
                "Mit R√∂stzwiebeln bestreuen"
            ],
            portionierung: "Pro Person ca. 250g K√§sesp√§tzle. Dazu Apfelmus oder Salat servieren."
        },
                    {
            id: 9,
            titel: "Bolognese mit Spaghetti",
            beschreibung: "Klassische Fleischsauce zu Spaghetti",
            verpflegungsart: "warm",
            verpflegungstyp: "voll",
            vegetarisch: false,
            kalorien: 650,
            basisZeit: 50,
            zutaten: [
                { menge: 5000, einheit: "g", name: "Spaghetti" },
                { menge: 4000, einheit: "g", name: "Rinderhackfleisch" },
                { menge: 2000, einheit: "g", name: "Zwiebeln, gew√ºrfelt" },
                { menge: 1500, einheit: "g", name: "Karotten, gerieben" },
                { menge: 1000, einheit: "g", name: "Sellerie, gew√ºrfelt" },
                { menge: 800, einheit: "g", name: "Tomatenmark" },
                { menge: 4, einheit: "Dosen", name: "St√ºcktomaten" },
                { menge: 200, einheit: "ml", name: "Rotwein" },
                { menge: 200, einheit: "ml", name: "√ñl" },
                { menge: 80, einheit: "g", name: "Salz" },
                { menge: 30, einheit: "g", name: "Oregano" },
                { menge: 25, einheit: "g", name: "Basilikum" }
            ],
            zubereitung: [
                "Spaghetti in Salzwasser bissfest kochen",
                "Hackfleisch in √ñl kr√ºmelig braten",
                "Zwiebeln, Karotten, Sellerie zugeben und mitd√ºnsten",
                "Tomatenmark zugeben, kurz anr√∂sten",
                "Mit Rotwein abl√∂schen, St√ºcktomaten zugeben",
                "30 Minuten k√∂cheln lassen, mit Kr√§utern abschmecken"
            ],
            portionierung: "Pro Person 100g Spaghetti und 200g Sauce. Dazu Parmesan und Brot."
        },
                    {
            id: 10,
            titel: "K√ºrbis-Ingwer-Suppe",
            beschreibung: "Cremige Suppe mit w√ºrziger Note",
            verpflegungsart: "warm",
            verpflegungstyp: "voll",
            vegetarisch: true,
            kalorien: 480,
            basisZeit: 40,
            zutaten: [
                { menge: 8000, einheit: "g", name: "Hokkaido-K√ºrbis, gew√ºrfelt" },
                { menge: 2000, einheit: "g", name: "Kartoffeln, gew√ºrfelt" },
                { menge: 1000, einheit: "g", name: "Zwiebeln, gew√ºrfelt" },
                { menge: 100, einheit: "g", name: "Ingwer, frisch gerieben" },
                { menge: 10, einheit: "l", name: "Gem√ºsebr√ºhe" },
                { menge: 400, einheit: "ml", name: "Kokosmilch" },
                { menge: 150, einheit: "ml", name: "√ñl" },
                { menge: 60, einheit: "g", name: "Salz" },
                { menge: 20, einheit: "g", name: "Pfeffer" },
                { menge: 10, einheit: "g", name: "Muskat" }
            ],
            zubereitung: [
                "Zwiebeln und Ingwer in √ñl anschwitzen",
                "K√ºrbis und Kartoffeln zugeben, kurz mitd√ºnsten",
                "Mit Br√ºhe abl√∂schen, 25 Minuten k√∂cheln",
                "P√ºrieren bis cremig",
                "Kokosmilch unterr√ºhren, mit Gew√ºrzen abschmecken"
            ],
            portionierung: "Pro Person ca. 400ml Suppe. Dazu Brot und K√ºrbiskerne."
        },
                    {
            id: 11,
            titel: "Rahmgulasch mit Pilzen",
            beschreibung: "Zartes Gulasch in Rahmsauce",
            verpflegungsart: "warm",
            verpflegungstyp: "voll",
            vegetarisch: false,
            kalorien: 680,
            basisZeit: 70,
            zutaten: [
                { menge: 5000, einheit: "g", name: "Schweinegulasch" },
                { menge: 3000, einheit: "g", name: "Champignons, geviertelt" },
                { menge: 2000, einheit: "g", name: "Zwiebeln, gew√ºrfelt" },
                { menge: 500, einheit: "ml", name: "Sahne" },
                { menge: 200, einheit: "ml", name: "Wei√üwein" },
                { menge: 300, einheit: "g", name: "Tomatenmark" },
                { menge: 200, einheit: "ml", name: "√ñl" },
                { menge: 80, einheit: "g", name: "Salz" },
                { menge: 30, einheit: "g", name: "Pfeffer" },
                { menge: 20, einheit: "g", name: "Majoran" },
                { menge: 40, einheit: "g", name: "Paprikapulver" }
            ],
            zubereitung: [
                "Fleisch in √ñl scharf anbraten",
                "Zwiebeln zugeben und glasig d√ºnsten",
                "Tomatenmark zugeben, kurz anr√∂sten",
                "Mit Wein abl√∂schen, 45 Minuten k√∂cheln",
                "Pilze zugeben, weitere 15 Minuten garen",
                "Sahne zugeben, nicht mehr kochen lassen"
            ],
            portionierung: "Pro Person ca. 400g Gulasch. Dazu Nudeln oder Kartoffeln."
        },
                    {
            id: 12,
            titel: "Gem√ºsepfanne Asia-Style",
            beschreibung: "Wok-Gem√ºse mit H√§hnchen und Reis",
            verpflegungsart: "warm",
            verpflegungstyp: "voll",
            vegetarisch: false,
            kalorien: 580,
            basisZeit: 35,
            zutaten: [
                { menge: 4000, einheit: "g", name: "Reis" },
                { menge: 3000, einheit: "g", name: "H√§hnchenbrust, in Streifen" },
                { menge: 2000, einheit: "g", name: "Pak Choi, grob geschnitten" },
                { menge: 1500, einheit: "g", name: "M√∂hren, in Streifen" },
                { menge: 1000, einheit: "g", name: "Paprika, in Streifen" },
                { menge: 500, einheit: "g", name: "Fr√ºhlingszwiebeln, in Ringen" },
                { menge: 200, einheit: "ml", name: "Sojasauce" },
                { menge: 100, einheit: "ml", name: "Sesam√∂l" },
                { menge: 50, einheit: "g", name: "Ingwer, gerieben" },
                { menge: 4, einheit: "Zehen", name: "Knoblauch, gehackt" }
            ],
            zubereitung: [
                "Reis kochen",
                "H√§hnchenstreifen in Sesam√∂l anbraten",
                "Ingwer und Knoblauch zugeben",
                "Hartes Gem√ºse zugeben, kurz anbraten",
                "Weiches Gem√ºse zugeben, mit Sojasauce abl√∂schen",
                "5 Minuten d√ºnsten, mit Reis servieren"
            ],
            portionierung: "Pro Person 150g Reis und 300g Gem√ºsepfanne."
          },
                    {
            id: 13,
            titel: "Erbseneintopf mit Kasseler",
            beschreibung: "Traditioneller Eintopf mit Kasseler und Erbsen",
            verpflegungsart: "warm",
            verpflegungstyp: "voll",
            vegetarisch: false,
            kalorien: 590,
            basisZeit: 55,
            zutaten: [
                { menge: 4000, einheit: "g", name: "Kasseler, gew√ºrfelt" },
                { menge: 3000, einheit: "g", name: "Gelbe Erbsen, getrocknet" },
                { menge: 4000, einheit: "g", name: "Kartoffeln, gew√ºrfelt" },
                { menge: 2000, einheit: "g", name: "M√∂hren, in Scheiben" },
                { menge: 1000, einheit: "g", name: "Sellerie, gew√ºrfelt" },
                { menge: 12, einheit: "l", name: "Gem√ºsebr√ºhe" },
                { menge: 80, einheit: "g", name: "Salz" },
                { menge: 30, einheit: "g", name: "Majoran" },
                { menge: 20, einheit: "g", name: "Pfeffer" }
            ],
            zubereitung: [
                "Erbsen √ºber Nacht einweichen, abgie√üen",
                "Kasseler in Br√ºhe 20 Minuten kochen",
                "Erbsen zugeben, 20 Minuten k√∂cheln",
                "Kartoffeln und Gem√ºse zugeben, weitere 20 Minuten garen",
                "Mit Gew√ºrzen abschmecken"
            ],
            portionierung: "Pro Person ca. 500ml Eintopf. Dazu Brot und Senf."
        },
                    {
            id: 14,
            titel: "Paprikagem√ºse mit Reis",
            beschreibung: "Ungarisches Paprikagem√ºse",
            verpflegungsart: "warm",
            verpflegungstyp: "voll",
            vegetarisch: true,
            kalorien: 520,
            basisZeit: 45,
            zutaten: [
                { menge: 4000, einheit: "g", name: "Reis" },
                { menge: 6000, einheit: "g", name: "Paprika, gemischt" },
                { menge: 3000, einheit: "g", name: "Zwiebeln, gew√ºrfelt" },
                { menge: 2000, einheit: "g", name: "Tomaten, gew√ºrfelt" },
                { menge: 400, einheit: "g", name: "Tomatenmark" },
                { menge: 100, einheit: "g", name: "Paprikapulver" },
                { menge: 200, einheit: "ml", name: "√ñl" },
                { menge: 80, einheit: "g", name: "Salz" },
                { menge: 25, einheit: "g", name: "Pfeffer" }
            ],
            zubereitung: [
                "Reis kochen",
                "Zwiebeln in √ñl glasig d√ºnsten",
                "Paprikapulver zugeben, kurz anr√∂sten",
                "Paprika und Tomaten zugeben, 20 Minuten d√ºnsten",
                "Tomatenmark unterr√ºhren, mit Gew√ºrzen abschmecken"
            ],
            portionierung: "Pro Person 150g Reis und 300g Paprikagem√ºse."
        },
                    {
            id: 15,
            titel: "Kartoffelsuppe mit Wienern",
            beschreibung: "Cremige Kartoffelsuppe mit W√ºrstchen",
            verpflegungsart: "warm",
            verpflegungstyp: "voll",
            vegetarisch: false,
            kalorien: 540,
            basisZeit: 40,
            zutaten: [
                { menge: 6000, einheit: "g", name: "Kartoffeln, gew√ºrfelt" },
                { menge: 2000, einheit: "g", name: "M√∂hren, in Scheiben" },
                { menge: 1500, einheit: "g", name: "Lauch, in Ringen" },
                { menge: 1000, einheit: "g", name: "Sellerie, gew√ºrfelt" },
                { menge: 50, einheit: "St√ºck", name: "Wiener W√ºrstchen" },
                { menge: 10, einheit: "l", name: "Gem√ºsebr√ºhe" },
                { menge: 400, einheit: "ml", name: "Sahne" },
                { menge: 80, einheit: "g", name: "Salz" },
                { menge: 30, einheit: "g", name: "Pfeffer" },
                { menge: 20, einheit: "g", name: "Muskat" }
            ],
            zubereitung: [
                "Gem√ºse in Br√ºhe 25 Minuten kochen",
                "P√ºrieren bis zur gew√ºnschten Konsistenz",
                "Sahne unterr√ºhren, nicht kochen",
                "W√ºrstchen in Scheiben schneiden, in der Suppe erw√§rmen",
                "Mit Gew√ºrzen abschmecken"
            ],
            portionierung: "Pro Person ca. 400ml Suppe mit 1 W√ºrstchen. Dazu Brot."
        },
                    {
            id: 16,
            titel: "Kalte Platte mit Aufschnitt und Salaten",
            beschreibung: "Abwechslungsreiche Kalte Platte f√ºr den Einsatz",
            verpflegungsart: "kalt",
            verpflegungstyp: "voll",
            vegetarisch: false,
            kalorien: 680,
            basisZeit: 90,
            zutaten: [
                { menge: 100, einheit: "St√ºck", name: "Baguettebr√∂tchen" },
                { menge: 2500, einheit: "g", name: "Salami" },
                { menge: 2500, einheit: "g", name: "Schinken, gekocht" },
                { menge: 2500, einheit: "g", name: "H√§hnchenbrust" },
                { menge: 500, einheit: "g", name: "Margarine" },
                { menge: 500, einheit: "g", name: "Butter" },
                { menge: 1000, einheit: "g", name: "Majon√§ise" },
                { menge: 3000, einheit: "g", name: "Eisbergsalat" },
                { menge: 2000, einheit: "g", name: "Tomaten, in Scheiben" },
                { menge: 500, einheit: "g", name: "Gurken, eingelegt" },
                { menge: 1500, einheit: "g", name: "Gurken, frisch, in Scheiben" },
                { menge: 2000, einheit: "g", name: "Krautsalat" },
                { menge: 800, einheit: "g", name: "Remoulade" },
                { menge: 3000, einheit: "g", name: "K√§se (Edam/Gouda), in Scheiben" },
                { menge: 1500, einheit: "g", name: "Paprika, gemischt, in Streifen" },
                { menge: 800, einheit: "g", name: "Zwiebeln, in Ringen" }
            ],
            zubereitung: [
                "Alle Aufschnitte und K√§se portioniert auf Platten anrichten",
                "Salate (Eisbergsalat, Krautsalat) in Sch√ºsseln anrichten",
                "Tomaten, Gurken und Paprika waschen, schneiden und auf Platten verteilen",
                "Margarine, Butter, Majon√§ise und Remoulade in Sch√§lchen portionieren",
                "Br√∂tchen in K√∂rben servieren"
            ],
            portionierung: "Als Buffet anrichten. Pro Person ca. 150g Aufschnitt, 100g K√§se, 200g Salate und 2 Br√∂tchen."
        },
        {
            id: 17,
            titel: "Nudelsalat-Buffet",
            beschreibung: "Verschiedene Nudelsalate zur Auswahl",
            verpflegungsart: "kalt",
            verpflegungstyp: "voll",
            vegetarisch: true,
            kalorien: 620,
            basisZeit: 60,
            zutaten: [
                { menge: 5000, einheit: "g", name: "Nudeln (verschiedene Sorten)" },
                { menge: 2000, einheit: "g", name: "Kirschtomaten, geviertelt" },
                { menge: 1500, einheit: "g", name: "Gurken, gew√ºrfelt" },
                { menge: 1000, einheit: "g", name: "Paprika, gew√ºrfelt" },
                { menge: 800, einheit: "g", name: "Karotten, geraspelt" },
                { menge: 500, einheit: "g", name: "Zwiebeln, gew√ºrfelt" },
                { menge: 1000, einheit: "ml", name: "Joghurt-Dressing" },
                { menge: 500, einheit: "ml", name: "Vinaigrette" },
                { menge: 300, einheit: "g", name: "Kr√§uter, frisch gehackt" },
                { menge: 100, einheit: "St√ºck", name: "Br√∂tchen" },
                { menge: 2000, einheit: "g", name: "K√§se, gew√ºrfelt" }
            ],
            zubereitung: [
                "Nudeln bissfest kochen, abk√ºhlen lassen",
                "Gem√ºse waschen, schneiden und vorbereiten",
                "Nudeln auf verschiedene Sch√ºsseln verteilen",
                "Mit unterschiedlichen Dressings und Gem√ºse mischen",
                "Mit Kr√§utern bestreuen, k√ºhl stellen"
            ],
            portionierung: "Pro Person 300g Nudelsalat und 2 Br√∂tchen. Verschiedene Dressings zur Auswahl."
        },
        {
            id: 18,
            titel: "Wrap-Bar mit verschiedenen F√ºllungen",
            beschreibung: "Selbstgemachte Wraps zur Zusammenstellung",
            verpflegungsart: "kalt",
            verpflegungstyp: "voll",
            vegetarisch: false,
            kalorien: 650,
            basisZeit: 75,
            zutaten: [
                { menge: 100, einheit: "St√ºck", name: "Wrap-Tortillas" },
                { menge: 3000, einheit: "g", name: "H√§hnchenbrust, gekocht" },
                { menge: 2000, einheit: "g", name: "Schinken, gekocht" },
                { menge: 1500, einheit: "g", name: "Thunfisch aus der Dose" },
                { menge: 3000, einheit: "g", name: "Gemischter Salat" },
                { menge: 2000, einheit: "g", name: "Tomaten, gew√ºrfelt" },
                { menge: 1500, einheit: "g", name: "Gurken, gew√ºrfelt" },
                { menge: 1000, einheit: "g", name: "Paprika, gew√ºrfelt" },
                { menge: 1500, einheit: "g", name: "K√§se, gerieben" },
                { menge: 800, einheit: "g", name: "Joghurt-Dip" },
                { menge: 800, einheit: "g", name: "Knoblauch-Dip" },
                { menge: 500, einheit: "g", name: "Salsa" }
            ],
            zubereitung: [
                "Alle F√ºllungen in separaten Sch√ºsseln anrichten",
                "Fleisch und Fisch zerpfl√ºcken/schneiden",
                "Gem√ºse waschen und schneiden",
                "Dips und Saucen vorbereiten",
                "Tortillas getrennt anbieten"
            ],
            portionierung: "Als Bar anrichten. Pro Person 2-3 Wraps je nach Gr√∂√üe. Verschiedene F√ºllungen zur Auswahl."
        },
        {
            id: 19,
            titel: "Brotzeitteller mit regionalen Spezialit√§ten",
            beschreibung: "Bayerische Brotzeit f√ºr den Einsatz",
            verpflegungsart: "kalt",
            verpflegungstyp: "voll",
            vegetarisch: false,
            kalorien: 720,
            basisZeit: 45,
            zutaten: [
                { menge: 80, einheit: "St√ºck", name: "Brezeln" },
                { menge: 100, einheit: "St√ºck", name: "Radi" },
                { menge: 3000, einheit: "g", name: "Obazda" },
                { menge: 2000, einheit: "g", name: "Leberk√§se, gekocht" },
                { menge: 1500, einheit: "g", name: "Wei√üwurst" },
                { menge: 2000, einheit: "g", name: "Bierk√§se" },
                { menge: 1500, einheit: "g", name: "R√§ucherk√§se" },
                { menge: 1000, einheit: "g", name: "Butter" },
                { menge: 2000, einheit: "g", name: "Gurken, eingelegt" },
                { menge: 1500, einheit: "g", name: "Zwiebeln, in Ringen" }
            ],
            zubereitung: [
                "Brezeln auf Tellern anrichten",
                "Obazda in Sch√ºsseln portionieren",
                "K√§se und Wurst auf Schneidebrettern anrichten",
                "Gem√ºse in Sch√§lchen vorbereiten",
                "Butter separat anbieten"
            ],
            portionierung: "Pro Person 1 Brezel, 150g K√§se/Wurst, 100g Obazda und Beilagen."
        },
        {
            id: 20,
            titel: "Antipasti-Platte mediterran",
            beschreibung: "Mediterrane Vorspeisen als Hauptmahlzeit",
            verpflegungsart: "kalt",
            verpflegungstyp: "voll",
            vegetarisch: true,
            kalorien: 580,
            basisZeit: 60,
            zutaten: [
                { menge: 100, einheit: "St√ºck", name: "Ciabatta-Brote" },
                { menge: 4000, einheit: "g", name: "Mozzarella" },
                { menge: 3000, einheit: "g", name: "Tomaten, in Scheiben" },
                { menge: 2000, einheit: "g", name: "Auberginen, gegrillt" },
                { menge: 2000, einheit: "g", name: "Zucchini, gegrillt" },
                { menge: 1500, einheit: "g", name: "Paprika, gegrillt" },
                { menge: 1000, einheit: "g", name: "Oliven, gemischt" },
                { menge: 800, einheit: "g", name: "Artischockenherzen" },
                { menge: 500, einheit: "ml", name: "Oliven√∂l" },
                { menge: 300, einheit: "g", name: "Basilikum, frisch" },
                { menge: 200, einheit: "g", name: "Pinienkerne" }
            ],
            zubereitung: [
                "Gem√ºse waschen und grillen/vorbereiten",
                "Mozzarella abtropfen lassen und portionieren",
                "Ciabatta in Scheiben schneiden",
                "Alles auf gro√üen Platten anrichten",
                "Mit Oliven√∂l betr√§ufeln, mit Basilikum bestreuen"
            ],
            portionierung: "Pro Person 200g Antipasti, 2-3 Ciabatta-Scheiben. Verschiedene Komponenten zur Auswahl."
        },
                {
            id: 21,
            titel: "Klassische Lunchpakete",
            beschreibung: "Praktische Lunchpakete f√ºr mobile Einsatzkr√§fte",
            verpflegungsart: "kalt",
            verpflegungstyp: "lunch",
            vegetarisch: false,
            kalorien: 720,
            basisZeit: 25,
            zutaten: [
                { menge: 50, einheit: "St√ºck", name: "Vollkornbr√∂tchen" },
                { menge: 1250, einheit: "g", name: "K√§se, in Scheiben" },
                { menge: 1000, einheit: "g", name: "Aufschnitt" },
                { menge: 1500, einheit: "g", name: "Tomaten, in Scheiben" },
                { menge: 1000, einheit: "g", name: "Gurken, in Scheiben" },
                { menge: 50, einheit: "St√ºck", name: "√Ñpfel" },
                { menge: 50, einheit: "St√ºck", name: "M√ºsliriegel" },
                { menge: 50, einheit: "St√ºck", name: "Trinkp√§ckchen (Apfelsaft)" },
                { menge: 50, einheit: "St√ºck", name: "Schokoriegel" }
            ],
            zubereitung: [
                "Br√∂tchen aufschneiden und mit K√§se und Aufschnitt belegen",
                "Tomaten- und Gurkenscheiben separat verpacken",
                "√Ñpfel waschen und trocknen",
                "Alle Komponenten in Lunchpakete portionieren",
                "Jedes Paket enth√§lt: 1 belegtes Br√∂tchen, Gem√ºsebeilage, 1 Apfel, 1 M√ºsliriegel, 1 Schokoriegel, 1 Trinkp√§ckchen"
            ],
            portionierung: "In einzelnen Lunchpaketen verpacken. Pro Person 1 komplettes Paket. Zus√§tzlich Wasser f√ºr den gesamten Einsatz bereitstellen."
        },
        {
            id: 22,
            titel: "Energie-Lunchpakete Sport",
            beschreibung: "Energiereiche Pakete f√ºr k√∂rperlich anstrengende Eins√§tze",
            verpflegungsart: "kalt",
            verpflegungstyp: "lunch",
            vegetarisch: false,
            kalorien: 850,
            basisZeit: 30,
            zutaten: [
                { menge: 50, einheit: "St√ºck", name: "Mehrkornbr√∂tchen" },
                { menge: 1500, einheit: "g", name: "Putenbrust" },
                { menge: 1000, einheit: "g", name: "K√§se, in Scheiben" },
                { menge: 1000, einheit: "g", name: "Studentenfutter" },
                { menge: 50, einheit: "St√ºck", name: "Energieriegel" },
                { menge: 50, einheit: "St√ºck", name: "Bananen" },
                { menge: 50, einheit: "St√ºck", name: "Isotonische Getr√§nke" },
                { menge: 2500, einheit: "g", name: "M√∂hren, Baby" },
                { menge: 50, einheit: "St√ºck", name: "M√ºsliriegel" }
            ],
            zubereitung: [
                "Br√∂tchen mit Putenbrust und K√§se belegen",
                "Bananen und M√∂hren waschen",
                "Studentenfutter in kleine Beutel portionieren",
                "Alle Komponenten in stabile Lunchpakete packen",
                "Isotonische Getr√§nke gek√ºhlt bereitstellen"
            ],
            portionierung: "Pro Person 1 Br√∂tchen, 1 Banane, 50g Studentenfutter, 1 Energieriegel, 1 isotonisches Getr√§nk."
        },
        {
            id: 23,
            titel: "Vegetarische Lunchpakete",
            beschreibung: "Ausgewogene vegetarische Lunchpakete",
            verpflegungsart: "kalt",
            verpflegungstyp: "lunch",
            vegetarisch: true,
            kalorien: 680,
            basisZeit: 35,
            zutaten: [
                { menge: 50, einheit: "St√ºck", name: "Vollkorntoast" },
                { menge: 1500, einheit: "g", name: "Frischk√§se" },
                { menge: 1000, einheit: "g", name: "Avocado" },
                { menge: 1500, einheit: "g", name: "Paprika, in Streifen" },
                { menge: 1000, einheit: "g", name: "Gurken, in Stiften" },
                { menge: 50, einheit: "St√ºck", name: "Birnen" },
                { menge: 50, einheit: "St√ºck", name: "Nussmischung" },
                { menge: 50, einheit: "St√ºck", name: "Fruchtsaft" },
                { menge: 50, einheit: "St√ºck", name: "Joghurt" }
            ],
            zubereitung: [
                "Toast mit Frischk√§se bestreichen",
                "Avocado sch√§len, entkernen und in Scheiben schneiden",
                "Gem√ºse waschen und schneiden",
                "Birnen waschen",
                "Joghurt und N√ºsse portionieren"
            ],
            portionierung: "Pro Person 2 Toasts, 1/4 Avocado, Gem√ºsesticks, 1 Birne, 1 Joghurt, 1 Nussmischung, 1 Saft."
        },
        {
            id: 24,
            titel: "Wrap-Lunchpakete",
            beschreibung: "Praktische Wraps f√ºr unterwegs",
            verpflegungsart: "kalt",
            verpflegungstyp: "lunch",
            vegetarisch: false,
            kalorien: 750,
            basisZeit: 40,
            zutaten: [
                { menge: 100, einheit: "St√ºck", name: "Wrap-Tortillas" },
                { menge: 2000, einheit: "g", name: "H√§hnchenbrust, gekocht" },
                { menge: 1500, einheit: "g", name: "Salatbl√§tter" },
                { menge: 1000, einheit: "g", name: "Tomaten, gew√ºrfelt" },
                { menge: 1000, einheit: "g", name: "Gurken, gew√ºrfelt" },
                { menge: 800, einheit: "g", name: "Joghurt-Dressing" },
                { menge: 50, einheit: "St√ºck", name: "√Ñpfel" },
                { menge: 50, einheit: "St√ºck", name: "M√ºsliriegel" },
                { menge: 50, einheit: "St√ºck", name: "Wasserflaschen 0,5l" }
            ],
            zubereitung: [
                "Tortillas mit Dressing bestreichen",
                "H√§hnchenbrust in Streifen schneiden",
                "Salat und Gem√ºse vorbereiten",
                "Wraps zusammenrollen und in Folie wickeln",
                "√Ñpfel waschen, M√ºsliriegel verpacken"
            ],
            portionierung: "Pro Person 2 Wraps, 1 Apfel, 1 M√ºsliriegel, 1 Wasserflasche."
        },
        {
            id: 25,
            titel: "Kraftpakete f√ºr Langzeiteinsatz",
            beschreibung: "Besonders nahrhafte Pakete f√ºr 24h-Eins√§tze",
            verpflegungsart: "kalt",
            verpflegungstyp: "lunch",
            vegetarisch: false,
            kalorien: 1200,
            basisZeit: 45,
            zutaten: [
                { menge: 50, einheit: "St√ºck", name: "Schinken-K√§se-Toast" },
                { menge: 50, einheit: "St√ºck", name: "Fertigsalate in Bechern" },
                { menge: 50, einheit: "St√ºck", name: "Proteinriegel" },
                { menge: 50, einheit: "St√ºck", name: "Nussmischungen" },
                { menge: 50, einheit: "St√ºck", name: "Trockenfr√ºchte" },
                { menge: 50, einheit: "St√ºck", name: "Energydrinks" },
                { menge: 50, einheit: "St√ºck", name: "Wasserflaschen 1l" },
                { menge: 50, einheit: "St√ºck", name: "Fruchtquetschies" },
                { menge: 50, einheit: "St√ºck", name: "M√ºsliriegel" }
            ],
            zubereitung: [
                "Toasts vorbereiten und verpacken",
                "Fertigsalate k√ºhl lagern",
                "N√ºsse und Trockenfr√ºchte portionieren",
                "Getr√§nke bereitstellen",
                "Alles in stabile Transportboxen packen"
            ],
            portionierung: "Pro Person 2 Toasts, 1 Salat, 2 Riegel, 1 Nussmischung, 1 Trockenfrucht, 1 Energydrink, 1 Wasser."
        },
                {
            id: 26,
            titel: "W√ºrstchen im Schlafrock",
            beschreibung: "Wiener W√ºrstchen in Bl√§tterteig f√ºr unterwegs",
            verpflegungsart: "warm",
            verpflegungstyp: "hand",
            vegetarisch: false,
            kalorien: 420,
            basisZeit: 30,
            zutaten: [
                { menge: 100, einheit: "St√ºck", name: "Wiener W√ºrstchen" },
                { menge: 100, einheit: "St√ºck", name: "Bl√§tterteigplatten" },
                { menge: 200, einheit: "g", name: "Senf" },
                { menge: 200, einheit: "g", name: "Ketchup" },
                { menge: 2, einheit: "St√ºck", name: "Eier zum Bestreichen" }
            ],
            zubereitung: [
                "Bl√§tterteig ausrollen und in Rechtecke schneiden",
                "Je 1 W√ºrstchen auf jedes Teigst√ºck legen",
                "Mit Senf bestreichen",
                "Teig um das W√ºrstchen wickeln, Enden festdr√ºcken",
                "Mit Ei bestreichen, im Ofen backen bis goldbraun"
            ],
            portionierung: "Pro Person 2 St√ºck. Mit Senf und Ketchup servieren. In Alufolie warm halten."
        },
        {
            id: 27,
            titel: "Mini-Frikadellen im Br√∂tchen",
            beschreibung: "Kleine Frikadellen im Br√∂tchen zum Mitnehmen",
            verpflegungsart: "warm",
            verpflegungstyp: "hand",
            vegetarisch: false,
            kalorien: 480,
            basisZeit: 40,
            zutaten: [
                { menge: 4000, einheit: "g", name: "Hackfleischmischung" },
                { menge: 100, einheit: "St√ºck", name: "Mini-Br√∂tchen" },
                { menge: 500, einheit: "g", name: "Zwiebeln, gew√ºrfelt" },
                { menge: 4, einheit: "St√ºck", name: "Eier" },
                { menge: 200, einheit: "g", name: "Semmelbr√∂sel" },
                { menge: 200, einheit: "ml", name: "√ñl" },
                { menge: 300, einheit: "g", name: "Senf" },
                { menge: 300, einheit: "g", name: "Ketchup" }
            ],
            zubereitung: [
                "Hackfleisch mit Zwiebeln, Eiern und Semmelbr√∂seln mischen",
                "Kleine Frikadellen formen",
                "In √ñl von beiden Seiten goldbraun braten",
                "Br√∂tchen aufschneiden und mit Senf bestreichen",
                "Frikadellen in Br√∂tchen legen"
            ],
            portionierung: "Pro Person 2 Mini-Frikadellenbr√∂tchen. Mit Ketchup servieren."
        },
        {
            id: 28,
            titel: "Kartoffelecken mit Dip",
            beschreibung: "W√ºrzige Ofenkartoffeln zum Mitnehmen",
            verpflegungsart: "warm",
            verpflegungstyp: "hand",
            vegetarisch: true,
            kalorien: 380,
            basisZeit: 45,
            zutaten: [
                { menge: 8000, einheit: "g", name: "Kartoffeln, festkochend" },
                { menge: 200, einheit: "ml", name: "Oliven√∂l" },
                { menge: 100, einheit: "g", name: "Paprikapulver" },
                { menge: 80, einheit: "g", name: "Salz" },
                { menge: 40, einheit: "g", name: "Knoblauchpulver" },
                { menge: 2000, einheit: "g", name: "Joghurt-Dip" },
                { menge: 2000, einheit: "g", name: "Kr√§uterquark" }
            ],
            zubereitung: [
                "Kartoffeln waschen und in Spalten schneiden",
                "Mit √ñl und Gew√ºrzen vermengen",
                "Im Ofen goldbraun backen",
                "Dips vorbereiten",
                "Kartoffelecken in Papiert√ºten portionieren"
            ],
            portionierung: "Pro Person 200g Kartoffelecken mit 2 Dip-Beh√§ltnissen."
        },
        {
            id: 29,
            titel: "Gem√ºse-Frittata-St√ºcke",
            beschreibung: "Italienische Eierspeise in handlichen Portionen",
            verpflegungsart: "warm",
            verpflegungstyp: "hand",
            vegetarisch: true,
            kalorien: 350,
            basisZeit: 35,
            zutaten: [
                { menge: 60, einheit: "St√ºck", name: "Eier" },
                { menge: 2000, einheit: "g", name: "Gem√ºse, gew√ºrfelt (Paprika, Zucchini, Zwiebeln)" },
                { menge: 1000, einheit: "g", name: "K√§se, gerieben" },
                { menge: 200, einheit: "ml", name: "Milch" },
                { menge: 100, einheit: "ml", name: "√ñl" },
                { menge: 80, einheit: "g", name: "Salz" },
                { menge: 30, einheit: "g", name: "Pfeffer" },
                { menge: 50, einheit: "g", name: "Kr√§uter, frisch" }
            ],
            zubereitung: [
                "Gem√ºse in √ñl anbraten",
                "Eier mit Milch verquirlen, w√ºrzen",
                "Gem√ºse in Backformen geben, Eimischung dar√ºber",
                "Mit K√§se bestreuen, backen bis goldbraun",
                "In handliche St√ºcke schneiden"
            ],
            portionierung: "Pro Person 2 Frittata-St√ºcke. In Backpapier gewickelt servieren."
        },
        {
            id: 30,
            titel: "Pikante Pfannkuchen mit Schinken-K√§se-F√ºllung",
            beschreibung: "Gef√ºllte Pfannkuchen f√ºr die Hand",
            verpflegungsart: "warm",
            verpflegungstyp: "hand",
            vegetarisch: false,
            kalorien: 450,
            basisZeit: 50,
            zutaten: [
                { menge: 4000, einheit: "g", name: "Pfannkuchenteig (fertig)" },
                { menge: 2000, einheit: "g", name: "Schinken, gekocht" },
                { menge: 2000, einheit: "g", name: "K√§se, gerieben" },
                { menge: 1000, einheit: "g", name: "Cr√®me fra√Æche" },
                { menge: 200, einheit: "ml", name: "√ñl" },
                { menge: 500, einheit: "g", name: "Zwiebeln, gew√ºrfelt" }
            ],
            zubereitung: [
                "Pfannkuchen backen",
                "Zwiebeln glasig d√ºnsten, mit Schinken und Cr√®me fra√Æche mischen",
                "Pfannkuchen mit F√ºllung bestreichen, zusammenrollen",
                "Mit K√§se bestreuen, √ºberbacken",
                "In handliche St√ºcke schneiden"
            ],
            portionierung: "Pro Person 2 Pfannkuchenst√ºcke. In Alufolie warm halten."
        },
               {
            id: 31,
            titel: "Energieb√§llchen Power-Mix",
            beschreibung: "Kohlenhydrat- und proteinreiche Energieb√§llchen",
            verpflegungsart: "kalt",
            verpflegungstyp: "hand",
            vegetarisch: true,
            kalorien: 280,
            basisZeit: 25,
            zutaten: [
                { menge: 2000, einheit: "g", name: "Haferflocken" },
                { menge: 1000, einheit: "g", name: "Datteln, entsteint" },
                { menge: 500, einheit: "g", name: "Mandelmus" },
                { menge: 500, einheit: "g", name: "Kokosraspel" },
                { menge: 500, einheit: "g", name: "Leinsamen" },
                { menge: 500, einheit: "g", name: "Kakaopulver" },
                { menge: 200, einheit: "ml", name: "Ahornsirup" },
                { menge: 100, einheit: "ml", name: "Wasser" }
            ],
            zubereitung: [
                "Datteln mit Wasser p√ºrieren",
                "Alle Zutaten vermengen",
                "Zu kleinen B√§llchen formen",
                "In Kokosraspel w√§lzen",
                "K√ºhl stellen"
            ],
            portionierung: "Pro Person 3 Energieb√§llchen. In Papier eingewickelt servieren."
        },
        {
            id: 32,
            titel: "Protein-Power-Sandwiches",
            beschreibung: "Sandwiches mit hohem Proteingehalt",
            verpflegungsart: "kalt",
            verpflegungstyp: "hand",
            vegetarisch: false,
            kalorien: 520,
            basisZeit: 30,
            zutaten: [
                { menge: 100, einheit: "St√ºck", name: "Vollkorntoast" },
                { menge: 3000, einheit: "g", name: "Putenbrust" },
                { menge: 1500, einheit: "g", name: "K√§se, in Scheiben" },
                { menge: 1000, einheit: "g", name: "Salatbl√§tter" },
                { menge: 800, einheit: "g", name: "Tomaten, in Scheiben" },
                { menge: 500, einheit: "g", name: "Gurken, in Scheiben" },
                { menge: 500, einheit: "g", name: "Senf" },
                { menge: 500, einheit: "g", name: "Remoulade" }
            ],
            zubereitung: [
                "Toastscheiben mit Senf oder Remoulade bestreichen",
                "Mit Putenbrust, K√§se und Gem√ºse belegen",
                "Zusammendr√ºcken und diagonal durchschneiden",
                "In Frischhaltefolie wickeln"
            ],
            portionierung: "Pro Person 2 Sandwichh√§lften. Gek√ºhlt bereitstellen."
        },
        {
            id: 33,
            titel: "Frischk√§se-Baguette mit Kr√§utern",
            beschreibung: "Franz√∂sische Baguettes mit Frischk√§sef√ºllung",
            verpflegungsart: "kalt",
            verpflegungstyp: "hand",
            vegetarisch: true,
            kalorien: 380,
            basisZeit: 20,
            zutaten: [
                { menge: 50, einheit: "St√ºck", name: "Mini-Baguettes" },
                { menge: 3000, einheit: "g", name: "Frischk√§se" },
                { menge: 500, einheit: "g", name: "Kr√§uter, frisch gehackt" },
                { menge: 500, einheit: "g", name: "Paprika, gew√ºrfelt" },
                { menge: 300, einheit: "g", name: "Fr√ºhlingszwiebeln, in Ringen" },
                { menge: 80, einheit: "g", name: "Salz" },
                { menge: 30, einheit: "g", name: "Pfeffer" }
            ],
            zubereitung: [
                "Baguettes aufschneiden, aber nicht durchtrennen",
                "Frischk√§se mit Kr√§utern und Gew√ºrzen vermengen",
                "Gem√ºse unterheben",
                "Baguettes mit Frischk√§secreme f√ºllen",
                "Zusammendr√ºcken"
            ],
            portionierung: "Pro Person 1 Mini-Baguette. In Folie gewickelt servieren."
        },
        {
            id: 34,
            titel: "Obst- und Gem√ºse-Snackbox",
            beschreibung: "Gesunde Snackbox mit frischem Obst und Gem√ºse",
            verpflegungsart: "kalt",
            verpflegungstyp: "hand",
            vegetarisch: true,
            kalorien: 320,
            basisZeit: 35,
            zutaten: [
                { menge: 50, einheit: "St√ºck", name: "√Ñpfel" },
                { menge: 50, einheit: "St√ºck", name: "Bananen" },
                { menge: 2500, einheit: "g", name: "M√∂hren, Baby" },
                { menge: 2000, einheit: "g", name: "Paprika, in Streifen" },
                { menge: 1500, einheit: "g", name: "Gurken, in Stiften" },
                { menge: 1000, einheit: "g", name: "Kirschtomaten" },
                { menge: 1000, einheit: "g", name: "Studentenfutter" },
                { menge: 1000, einheit: "g", name: "Joghurt-Dip" }
            ],
            zubereitung: [
                "Obst und Gem√ºse waschen",
                "Gem√ºse in handliche St√ºcke schneiden",
                "Studentenfutter portionieren",
                "Dip in kleine Beh√§lter f√ºllen",
                "Alles in Snackboxen anrichten"
            ],
            portionierung: "Pro Person 1 Apfel, 1 Banane, Gem√ºsesticks, 20g Studentenfutter, 1 Dip."
        },
        {
            id: 35,
            titel: "M√ºsliriegel selbstgemacht",
            beschreibung: "Energiereiche M√ºsliriegel ohne Backen",
            verpflegungsart: "kalt",
            verpflegungstyp: "hand",
            vegetarisch: true,
            kalorien: 250,
            basisZeit: 40,
            zutaten: [
                { menge: 2000, einheit: "g", name: "Haferflocken" },
                { menge: 1000, einheit: "g", name: "Nussmischung" },
                { menge: 1000, einheit: "g", name: "Trockenfr√ºchte" },
                { menge: 500, einheit: "g", name: "Kokos√∂l" },
                { menge: 500, einheit: "g", name: "Honig" },
                { menge: 500, einheit: "g", name: "Erdnussbutter" },
                { menge: 200, einheit: "g", name: "Kakaopulver" }
            ],
            zubereitung: [
                "N√ºsse und Trockenfr√ºchte hacken",
                "Kokos√∂l, Honig und Erdnussbutter erw√§rmen",
                "Alle Zutaten vermengen",
                "In Backform pressen",
                "K√ºhl stellen, in Riegel schneiden"
            ],
            portionierung: "Pro Person 2 M√ºsliriegel. In Backpapier gewickelt servieren."
        } 
    ];

        // Globale Variablen
        let aktuellesRezept = null;
        let personenAnzahl = 50;
        let aktuellerLagerTab = 'lebensmittel';
        let lagerDaten = {
            lebensmittel: [],
            material: []
        };

        // NEUE FUNKTION: Findet Zutat im Lebensmittellager
        function findeZutatImLager(zutatName) {
            const lager = lagerDaten.lebensmittel;
            const gesuchterName = zutatName.toLowerCase();
            
            // Einfache Suche nach Teil√ºbereinstimmung
            for (let item of lager) {
                const lagerName = item.name.toLowerCase();
                
                // Direkte √úbereinstimmung oder Teil√ºbereinstimmung
                if (lagerName.includes(gesuchterName) || gesuchterName.includes(lagerName)) {
                    return item;
                }
                
                // Spezielle F√§lle f√ºr h√§ufige Zutaten
                if ((gesuchterName.includes('kartoffel') && lagerName.includes('kartoffel')) ||
                    (gesuchterName.includes('karotte') && lagerName.includes('karotte')) ||
                    (gesuchterName.includes('zwiebel') && lagerName.includes('zwiebel')) ||
                    (gesuchterName.includes('nudel') && lagerName.includes('nudel')) ||
                    (gesuchterName.includes('reis') && lagerName.includes('reis')) ||
                    (gesuchterName.includes('√∂l') && lagerName.includes('√∂l')) ||
                    (gesuchterName.includes('salz') && lagerName.includes('salz'))) {
                    return item;
                }
            }
            
            return null;
        }

        // NEUE FUNKTION: Berechnet ben√∂tigte Menge unter Ber√ºcksichtigung des Lagers
        function berechneBen√∂tigteMenge(rezeptZutat, lagerOption) {
            const skalierteMenge = (rezeptZutat.menge / 50) * personenAnzahl;
            
            if (lagerOption === 'alles-kaufen') {
                return {
                    ben√∂tigt: skalierteMenge,
                    ausLager: 0,
                    zuKaufen: skalierteMenge
                };
            }
            
            // Lager verwenden - pr√ºfe ob Zutat im Lager
            const lagerItem = findeZutatImLager(rezeptZutat.name);
            
            if (!lagerItem) {
                return {
                    ben√∂tigt: skalierteMenge,
                    ausLager: 0,
                    zuKaufen: skalierteMenge
                };
            }
            
            // Einheiten vergleichen und ggf. umrechnen
            let lagerMenge = lagerItem.menge;
            const rezeptEinheit = rezeptZutat.einheit || 'St√ºck';
            
            // Einheiten umrechnen falls n√∂tig
            if (rezeptEinheit !== lagerItem.einheit) {
                // Einfache Umrechnung f√ºr h√§ufige F√§lle
                if (rezeptEinheit === 'g' && lagerItem.einheit === 'kg') {
                    lagerMenge = lagerItem.menge * 1000;
                } else if (rezeptEinheit === 'kg' && lagerItem.einheit === 'g') {
                    lagerMenge = lagerItem.menge / 1000;
                } else if (rezeptEinheit === 'ml' && lagerItem.einheit === 'l') {
                    lagerMenge = lagerItem.menge * 1000;
                } else if (rezeptEinheit === 'l' && lagerItem.einheit === 'ml') {
                    lagerMenge = lagerItem.menge / 1000;
                }
                // F√ºr St√ºck vs. kg - schwierig umzurechnen, daher keine Umrechnung
            }
            
            const ausLager = Math.min(skalierteMenge, lagerMenge);
            const zuKaufen = Math.max(0, skalierteMenge - ausLager);
            
            return {
                ben√∂tigt: skalierteMenge,
                ausLager: ausLager,
                zuKaufen: zuKaufen,
                lagerItem: lagerItem
            };
        }

        // VERBESSERTE EINKAUFSLISTEN-FUNKTIONALIT√ÑT
        function aktualisiereEinkaufsliste() {
            document.getElementById('einkauf-personen').textContent = personenAnzahl;
            
            if (!aktuellesRezept) {
                document.getElementById('einkauf-rezept-titel').textContent = 'Kein Rezept ausgew√§hlt';
                document.getElementById('einkaufsliste-content').innerHTML = '<p>Bitte w√§hle zuerst ein Rezept auf der Rezept-Seite aus.</p>';
                return;
            }

            document.getElementById('einkauf-rezept-titel').textContent = aktuellesRezept.titel;
            
            const container = document.getElementById('einkaufsliste-content');
            const lagerOption = document.querySelector('input[name="lager-option"]:checked').value;
            
            let gesparteMenge = 0;
            let gesparteArtikel = 0;
            let teilweiseGedeckt = 0;

            const einkaufslisteHTML = aktuellesRezept.zutaten.map(zutat => {
                const mengenBerechnung = berechneBen√∂tigteMenge(zutat, lagerOption);
                const { zuKaufen, ausLager, ben√∂tigt } = mengenBerechnung;
                
                if (ausLager > 0) {
                    gesparteMenge += ausLager;
                    gesparteArtikel++;
                }

                // Teilweise Deckung z√§hlen
                if (ausLager > 0 && zuKaufen > 0) {
                    teilweiseGedeckt++;
                }
                
                // Automatische Umrechnung f√ºr gro√üe Mengen
                let { menge: anzuzeigendeMenge, einheit: anzuzeigendeEinheit } = konvertiereZuFeldkueche(zuKaufen, zutat.einheit, zutat.name);
                const { menge: benoetigteMenge, einheit: benoetigteEinheit } = konvertiereZuFeldkueche(ben√∂tigt, zutat.einheit, zutat.name);
                const { menge: lagerMenge, einheit: lagerEinheit } = konvertiereZuFeldkueche(ausLager, zutat.einheit, zutat.name);
                const { menge: gesamtMenge, einheit: gesamtEinheit } = konvertiereZuFeldkueche(ben√∂tigt, zutat.einheit, zutat.name);

                if (lagerOption === 'alles-kaufen') {
                    // Alles neu kaufen - normale Darstellung
                    return `
                        <div class="einkaufsliste-item">
                            <span>${zutat.name}</span>
                            <span>${anzuzeigendeMenge} ${anzuzeigendeEinheit}</span>
                        </div>
                    `;
                } else {
                    // Lager verwenden
                    if (ausLager >= ben√∂tigt) {
                        // KOMPLETT aus Lager
                        gesparteArtikel++;
                        return `
                            <div class="einkaufsliste-item aus-lager">
                                <span>${zutat.name}</span>
                                <span>${gesamtMenge} ${gesamtEinheit}</span>
                            </div>
                        `;
                    } else if (ausLager > 0 && zuKaufen > 0) {
                        // TEILWEISE aus Lager - KORRIGIERTE DARSTELLUNG
                        return `
                            <div class="einkaufsliste-item teilweise-aus-lager">
                                <div>
                                    <span>${zutat.name}</span>
                                    <div class="lager-details">
                                        Gesamt: ${gesamtMenge} ${gesamtEinheit} | 
                                        <span class="aus-lager">${lagerMenge} ${lagerEinheit} aus Lager</span> | 
                                        <span class="zu-kaufen">${anzuzeigendeMenge} ${anzuzeigendeEinheit} zu kaufen</span>
                                    </div>
                                </div>
                                <span>${anzuzeigendeMenge} ${anzuzeigendeEinheit}</span>
                            </div>
                        `;
                    } else {
                        // GAR NICHT aus Lager
                        return `
                            <div class="einkaufsliste-item">
                                <span>${zutat.name}</span>
                                <span>${anzuzeigendeMenge} ${anzuzeigendeEinheit}</span>
                            </div>
                        `;
                    }
                }
            }).join('');
            
            let hinweisHTML = '';
            if (lagerOption === 'lager-verwenden') {
                let hinweisText = '';
                if (gesparteArtikel > 0 && teilweiseGedeckt > 0) {
                    hinweisText = `<strong>Lager verwendet:</strong> ${gesparteArtikel - teilweiseGedeckt} Artikel komplett aus Lager, ${teilweiseGedeckt} Artikel teilweise aus Lager.`;
                } else if (gesparteArtikel > 0) {
                    hinweisText = `<strong>Lager verwendet:</strong> ${gesparteArtikel} Artikel mit insgesamt ${gesparteMenge.toFixed(1)} Einheiten werden aus dem Lager entnommen.`;
                } else {
                    hinweisText = `<strong>Keine Lagerbest√§nde verf√ºgbar</strong> f√ºr dieses Rezept. Alles muss neu gekauft werden.`;
                }
                
                hinweisHTML = `
                    <div class="lager-hinweis">
                        ${hinweisText}
                    </div>
                `;
            }
            
            container.innerHTML = `
                <div class="einkaufsliste-container">
                    <h3>Zutaten ${lagerOption === 'lager-verwenden' ? '(mit Lagerabzug)' : '(komplett neu kaufen)'}</h3>
                    ${einkaufslisteHTML}
                    ${hinweisHTML}
                    <!-- Getr√§nke immer separat -->
                    <div class="einkaufsliste-item" style="background-color: #e8f4f8; margin-top: 10px; padding: 10px; border-radius: 4px;">
                        <span><strong>Getr√§nke (Wasser, Saftschorle)</strong></span>
                        <span><strong>${personenAnzahl} l</strong></span>
                    </div>
                </div>
            `;
        }

        // Automatische Umrechnung f√ºr Feldk√ºchen-Mengen
        function konvertiereZuFeldkueche(menge, einheit, zutatName) {
            const name = zutatName.toLowerCase();
            
            // F√ºr gro√üe Mengen (ab 1000) in kg/l umrechnen
            if (einheit === "g" && menge >= 1000) {
                return { menge: (menge / 1000).toFixed(1), einheit: "kg" };
            }
            if (einheit === "ml" && menge >= 1000) {
                return { menge: (menge / 1000).toFixed(1), einheit: "l" };
            }
            
            // F√ºr spezifische Zutaten automatisch passende Einheiten
            if (einheit === "" || einheit === "St√ºck") {
                if (name.includes('kartoffel') || name.includes('karotte') || name.includes('zwiebel') || 
                    name.includes('tomate') || name.includes('gurke') || name.includes('brokkoli') ||
                    name.includes('paprika') || name.includes('avocado') || name.includes('apfel') ||
                    name.includes('banane')) {
                    if (menge >= 10) {
                        return { menge: Math.round(menge), einheit: "kg" };
                    }
                }
            }
            
            // Standard: Einheit beibehalten, aber runden
            let angezeigteMenge = menge;
            if (menge % 1 !== 0) {
                angezeigteMenge = menge.toFixed(1);
            }
            
            // F√ºr leere Einheiten "St√ºck" anzeigen
            const finaleEinheit = einheit === "" ? "St√ºck" : einheit;
            
            return { menge: angezeigteMenge, einheit: finaleEinheit };
        }

        // LAGER-FUNKTIONALIT√ÑT
        function wechselLagerTab(tab) {
            aktuellerLagerTab = tab;
            
            // Tabs aktivieren
            document.querySelectorAll('.lager-tab').forEach(tabElement => {
                tabElement.classList.remove('active');
            });
            event.target.classList.add('active');
            
            // Formular und Tabelle aktualisieren
            lagerFormularAktualisieren();
            lagerAnzeigen();
        }

        function lagerFormularAktualisieren() {
            const formContainer = document.getElementById('lager-form');
            
            if (aktuellerLagerTab === 'lebensmittel') {
                formContainer.innerHTML = `
                    <div class="form-group">
                        <label for="neues-item">Artikelname</label>
                        <input type="text" id="neues-item" placeholder="z.B. Kartoffeln">
                    </div>
                    <div class="form-group">
                        <label for="neue-kategorie">Kategorie</label>
                        <select id="neue-kategorie">
                            <option value="Gem√ºse">Gem√ºse</option>
                            <option value="Getreide">Getreide</option>
                            <option value="Konserven">Konserven</option>
                            <option value="Getr√§nke">Getr√§nke</option>
                            <option value="Gew√ºrze">Gew√ºrze</option>
                            <option value="Milchprodukte">Milchprodukte</option>
                            <option value="Fleisch">Fleisch</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="neue-einheit">Einheit</label>
                        <select id="neue-einheit">
                            <option value="kg">kg</option>
                            <option value="g">g</option>
                            <option value="l">l</option>
                            <option value="ml">ml</option>
                            <option value="St√ºck">St√ºck</option>
                            <option value="Dosen">Dosen</option>
                            <option value="Packungen">Packungen</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="neue-menge">Aktuelle Menge</label>
                        <input type="number" id="neue-menge" min="0" step="1" value="0">
                    </div>
                    <div class="form-group">
                        <label for="neue-mindestmenge">Mindestmenge</label>
                        <input type="number" id="neue-mindestmenge" min="0" step="1" value="0">
                    </div>
                    <div class="form-group">
                        <label for="neue-haltbarkeit">Haltbarkeit (MHD)</label>
                        <input type="date" id="neue-haltbarkeit">
                    </div>
                    <div class="form-group">
                        <label for="neue-lagerort">Lagerort</label>
                        <select id="neue-lagerort">
                            <option value="K√ºhlschrank">K√ºhlschrank</option>
                            <option value="Trockenlager">Trockenlager</option>
                            <option value="Tiefk√ºhl">Tiefk√ºhl</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label>&nbsp;</label>
                        <button class="success" onclick="neuesLagerItem()">Hinzuf√ºgen</button>
                    </div>
                `;
            } else {
                formContainer.innerHTML = `
                    <div class="form-group">
                        <label for="neues-item">Artikelname</label>
                        <input type="text" id="neues-item" placeholder="z.B. Gaskartuschen">
                    </div>
                    <div class="form-group">
                        <label for="neue-kategorie">Kategorie</label>
                        <select id="neue-kategorie">
                            <option value="K√ºchenausstattung">K√ºchenausstattung</option>
                            <option value="Verbrauchsmaterial">Verbrauchsmaterial</option>
                            <option value="Sicherheit">Sicherheit</option>
                            <option value="Reinigung">Reinigung</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="neue-einheit">Einheit</label>
                        <select id="neue-einheit">
                            <option value="St√ºck">St√ºck</option>
                            <option value="Packungen">Packungen</option>
                            <option value="Flaschen">Flaschen</option>
                            <option value="Kanister">Kanister</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="neue-menge">Aktuelle Menge</label>
                        <input type="number" id="neue-menge" min="0" step="1" value="0">
                    </div>
                    <div class="form-group">
                        <label for="neue-mindestmenge">Mindestmenge</label>
                        <input type="number" id="neue-mindestmenge" min="0" step="1" value="0">
                    </div>
                    <div class="form-group">
                        <label for="neue-lagerort">Lagerort</label>
                        <select id="neue-lagerort">
                            <option value="Lagerraum A">Lagerraum A</option>
                            <option value="Lagerraum B">Lagerraum B</option>
                            <option value="Feldk√ºchen-Anh√§nger">Feldk√ºchen-Anh√§nger</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label>&nbsp;</label>
                        <button class="success" onclick="neuesLagerItem()">Hinzuf√ºgen</button>
                    </div>
                `;
            }
        }
        // KORRIGIERTE LAGER-DATEN LADEN FUNKTION
        async function lagerDatenLaden() {
            try {
                console.log('Lade Lagerdaten von Upstash...');
                
                const response = await fetch(`${UPSTASH_CONFIG.URL}/get/lager`, {
                    headers: {
                        'Authorization': `Bearer ${UPSTASH_CONFIG.TOKEN}`
                    }
                });
                
                if (!response.ok) {
                    throw new Error(`HTTP error! status: ${response.status}`);
                }
                
                const data = await response.json();
                console.log('Upstash GET Response:', data);
                
                if (data && data.result) {
                    // WICHTIG: Pr√ºfen ob data.result bereits ein String ist oder schon ein Objekt
                    let geladeneDaten;
                    if (typeof data.result === 'string') {
                        geladeneDaten = JSON.parse(data.result);
                    } else {
                        geladeneDaten = data.result;
                    }
                    
                    if (geladeneDaten && (geladeneDaten.lebensmittel || geladeneDaten.material)) {
                        lagerDaten = geladeneDaten;
                        console.log('Lagerdaten erfolgreich aus Cloud geladen:', lagerDaten);
                        
                        // Sync-Zeitpunkt speichern
                        localStorage.setItem('lastCloudSync', new Date().toISOString());
                        localStorage.setItem('lagerDaten', JSON.stringify(lagerDaten));
                    } else {
                        throw new Error('Ung√ºltiges Datenformat aus Cloud');
                    }
                } else {
                    throw new Error('Keine Daten in Cloud gefunden');
                }
                
            } catch (error) {
                console.error('Fehler beim Laden der Lagerdaten aus Cloud:', error);
                
                // Fallback zu localStorage
                const localData = localStorage.getItem('lagerDaten');
                if (localData) {
                    try {
                        lagerDaten = JSON.parse(localData);
                        console.log('Lagerdaten aus lokalem Storage geladen');
                    } catch (parseError) {
                        console.error('Fehler beim Parsen der lokalen Daten:', parseError);
                        lagerStandardDatenLaden();
                    }
                } else {
                    lagerStandardDatenLaden();
                }
            }
            
            lagerFormularAktualisieren();
            lagerAnzeigen();
        }
        
        // Hilfsfunktion f√ºr Standard-Lagerdaten
        function lagerStandardDatenLaden() {
            console.log('Lade Standard-Lagerdaten');
            lagerDaten = {
                lebensmittel: [
                    { name: "Kartoffeln", kategorie: "Gem√ºse", einheit: "kg", menge: 100, mindestmenge: 50, haltbarkeit: "2024-12-31", lagerort: "Trockenlager" },
                    { name: "Nudeln", kategorie: "Getreide", einheit: "kg", menge: 50, mindestmenge: 25, haltbarkeit: "2025-06-30", lagerort: "Trockenlager" },
                    { name: "√ñl", kategorie: "Gew√ºrze", einheit: "l", menge: 20, mindestmenge: 10, haltbarkeit: "2025-03-15", lagerort: "Trockenlager" }
                ],
                material: [
                    { name: "Gaskartuschen", kategorie: "K√ºchenausstattung", einheit: "St√ºck", menge: 10, mindestmenge: 5, lagerort: "Feldk√ºchen-Anh√§nger" },
                    { name: "Einweggeschirr", kategorie: "Verbrauchsmaterial", einheit: "Packungen", menge: 20, mindestmenge: 10, lagerort: "Lagerraum A" },
                    { name: "Desinfektionsmittel", kategorie: "Reinigung", einheit: "Flaschen", menge: 15, mindestmenge: 8, lagerort: "Lagerraum B" }
                ]
            };
            localStorage.setItem('lagerDaten', JSON.stringify(lagerDaten));
        }

        // VERBESSERTE LAGER-DATEN SPEICHERN FUNKTION
        async function lagerDatenSpeichern() {
            try {
                console.log('Speichere Lagerdaten in Upstash...', lagerDaten);
                
                const response = await fetch(`${UPSTASH_CONFIG.URL}/set/lager`, {
                    method: 'POST',
                    headers: {
                        'Authorization': `Bearer ${UPSTASH_CONFIG.TOKEN}`,
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify(lagerDaten)
                });
                
                if (!response.ok) {
                    throw new Error(`HTTP error! status: ${response.status}`);
                }
                
                const result = await response.json();
                console.log('Upstash SET Response:', result);
                
                // Immer auch lokal speichern als Backup
                localStorage.setItem('lagerDaten', JSON.stringify(lagerDaten));
                localStorage.setItem('lastCloudSync', new Date().toISOString());
                
                console.log('Daten erfolgreich in Cloud und lokal gespeichert');
                return true;
                
            } catch (error) {
                console.error('Fehler beim Speichern der Lagerdaten in Cloud:', error);
                
                // Fallback: Nur lokal speichern
                localStorage.setItem('lagerDaten', JSON.stringify(lagerDaten));
                localStorage.setItem('lastCloudSync', new Date().toISOString());
                
                throw new Error(`Cloud-Speichern fehlgeschlagen: ${error.message}. Daten wurden lokal gesichert.`);
            }
        }

        function lagerAnzeigen() {
            const tabelle = document.getElementById('lager-tabelle');
            const header = document.getElementById('lager-table-header');
            const statsContainer = document.getElementById('lager-stats');
            const aktuellesLager = lagerDaten[aktuellerLagerTab];
            
            if (!tabelle || !header || !statsContainer) return;
            
            // Tabellenkopf je nach Lager-Typ
            if (aktuellerLagerTab === 'lebensmittel') {
                header.innerHTML = `
                    <tr>
                        <th>Artikel</th>
                        <th>Kategorie</th>
                        <th>Einheit</th>
                        <th>Menge</th>
                        <th>Mindestmenge</th>
                        <th>Haltbarkeit</th>
                        <th>Lagerort</th>
                        <th>Status</th>
                        <th>Aktionen</th>
                    </tr>
                `;
            } else {
                header.innerHTML = `
                    <tr>
                        <th>Artikel</th>
                        <th>Kategorie</th>
                        <th>Einheit</th>
                        <th>Menge</th>
                        <th>Mindestmenge</th>
                        <th>Lagerort</th>
                        <th>Status</th>
                        <th>Aktionen</th>
                    </tr>
                `;
            }
            
            // Statistiken berechnen
            const gesamtArtikel = aktuellesLager.length;
            const niedrigerBestand = aktuellesLager.filter(item => item.menge < item.mindestmenge).length;
            const kritischerBestand = aktuellesLager.filter(item => item.menge < item.mindestmenge * 0.5).length;
            
            // Statistiken anzeigen
            statsContainer.innerHTML = `
                <div class="stat-card">
                    <h3>Gesamtartikel</h3>
                    <div class="number">${gesamtArtikel}</div>
                </div>
                <div class="stat-card ${niedrigerBestand > 0 ? 'warning' : ''}">
                    <h3>Niedriger Bestand</h3>
                    <div class="number">${niedrigerBestand}</div>
                </div>
                <div class="stat-card ${kritischerBestand > 0 ? 'critical' : ''}">
                    <h3>Kritischer Bestand</h3>
                    <div class="number">${kritischerBestand}</div>
                </div>
            `;
            
            // Tabelle f√ºllen
            tabelle.innerHTML = aktuellesLager.map((item, index) => {
                let statusKlasse = '';
                let statusText = 'OK';
                
                if (item.menge < item.mindestmenge * 0.5) {
                    statusKlasse = 'critical-stock';
                    statusText = 'Kritisch';
                } else if (item.menge < item.mindestmenge) {
                    statusKlasse = 'low-stock';
                    statusText = 'Niedrig';
                }
                
                // F√ºr Lebensmittel: Haltbarkeit pr√ºfen
                if (aktuellerLagerTab === 'lebensmittel' && item.haltbarkeit) {
                    const heute = new Date();
                    const haltbarkeit = new Date(item.haltbarkeit);
                    const tageBisAblauf = Math.ceil((haltbarkeit - heute) / (1000 * 60 * 60 * 24));
                    
                    if (tageBisAblauf < 0) {
                        statusKlasse = 'expired';
                        statusText = 'Abgelaufen';
                    } else if (tageBisAblauf <= 30) {
                        statusKlasse = 'expiring-soon';
                        statusText = `L√§uft in ${tageBisAblauf} Tagen ab`;
                    }
                }
                
                const haltbarkeitText = item.haltbarkeit ? new Date(item.haltbarkeit).toLocaleDateString('de-DE') : '-';
                
                if (aktuellerLagerTab === 'lebensmittel') {
                    return `
                        <tr class="${statusKlasse}">
                            <td>${item.name}</td>
                            <td>${item.kategorie}</td>
                            <td>${item.einheit}</td>
                            <td>
                                <input type="number" class="menge-input" value="${item.menge}" 
                                       onchange="mengeDirektAendern(${index}, this.value)"
                                       min="0">
                            </td>
                            <td>${item.mindestmenge}</td>
                            <td>${haltbarkeitText}</td>
                            <td>${item.lagerort}</td>
                            <td>${statusText}</td>
                            <td class="lager-actions">
                                <button onclick="lagerItemLoeschen(${index})" class="danger">L√∂schen</button>
                            </td>
                        </tr>
                    `;
                } else {
                    return `
                        <tr class="${statusKlasse}">
                            <td>${item.name}</td>
                            <td>${item.kategorie}</td>
                            <td>${item.einheit}</td>
                            <td>
                                <input type="number" class="menge-input" value="${item.menge}" 
                                       onchange="mengeDirektAendern(${index}, this.value)"
                                       min="0">
                            </td>
                            <td>${item.mindestmenge}</td>
                            <td>${item.lagerort}</td>
                            <td>${statusText}</td>
                            <td class="lager-actions">
                                <button onclick="lagerItemLoeschen(${index})" class="danger">L√∂schen</button>
                            </td>
                        </tr>
                    `;
                }
            }).join('');
        }

        async function neuesLagerItem() {
            const nameInput = document.getElementById('neues-item');
            const kategorieInput = document.getElementById('neue-kategorie');
            const einheitInput = document.getElementById('neue-einheit');
            const mengeInput = document.getElementById('neue-menge');
            const mindestmengeInput = document.getElementById('neue-mindestmenge');
            const lagerortInput = document.getElementById('neue-lagerort');
            
            const name = nameInput.value.trim();
            const kategorie = kategorieInput.value;
            const einheit = einheitInput.value;
            const menge = parseInt(mengeInput.value);
            const mindestmenge = parseInt(mindestmengeInput.value);
            const lagerort = lagerortInput.value;
            
            if (!name || isNaN(menge) || isNaN(mindestmenge)) {
                alert('Bitte f√ºllen Sie alle Pflichtfelder korrekt aus.');
                return;
            }
            
            const neuesItem = {
                name,
                kategorie,
                einheit,
                menge,
                mindestmenge,
                lagerort
            };
            
            // Zus√§tzliche Felder f√ºr Lebensmittel
            if (aktuellerLagerTab === 'lebensmittel') {
                const haltbarkeitInput = document.getElementById('neue-haltbarkeit');
                neuesItem.haltbarkeit = haltbarkeitInput.value || null;
            }
            
            lagerDaten[aktuellerLagerTab].push(neuesItem);
            await lagerDatenSpeichern();
            lagerAnzeigen();
            
            // Formular zur√ºcksetzen
            nameInput.value = '';
            mengeInput.value = '0';
            mindestmengeInput.value = '0';
            if (aktuellerLagerTab === 'lebensmittel') {
                document.getElementById('neue-haltbarkeit').value = '';
            }
        }

        async function mengeDirektAendern(index, neueMenge) {
            const aktuellesLager = lagerDaten[aktuellerLagerTab];
            if (index < 0 || index >= aktuellesLager.length) return;
            
            aktuellesLager[index].menge = parseInt(neueMenge) || 0;
            
            if (aktuellesLager[index].menge < 0) {
                aktuellesLager[index].menge = 0;
            }
            
            await lagerDatenSpeichern();
            lagerAnzeigen();
        }

        async function lagerItemLoeschen(index) {
            const aktuellesLager = lagerDaten[aktuellerLagerTab];
            if (confirm('M√∂chten Sie diesen Artikel wirklich l√∂schen?')) {
                aktuellesLager.splice(index, 1);
                await lagerDatenSpeichern();
                lagerAnzeigen();
            }
        }

        function lagerExportieren() {
            const aktuellesLager = lagerDaten[aktuellerLagerTab];
            const lagerTyp = aktuellerLagerTab === 'lebensmittel' ? 'Lebensmittel' : 'Material';
            
            let csvHeader, csvRows;
            
            if (aktuellerLagerTab === 'lebensmittel') {
                csvHeader = 'Artikel,Kategorie,Einheit,Menge,Mindestmenge,Haltbarkeit,Lagerort\n';
                csvRows = aktuellesLager.map(item => 
                    `"${item.name}","${item.kategorie}","${item.einheit}",${item.menge},${item.mindestmenge},"${item.haltbarkeit || ''}","${item.lagerort}"`
                ).join('\n');
            } else {
                csvHeader = 'Artikel,Kategorie,Einheit,Menge,Mindestmenge,Lagerort\n';
                csvRows = aktuellesLager.map(item => 
                    `"${item.name}","${item.kategorie}","${item.einheit}",${item.menge},${item.mindestmenge},"${item.lagerort}"`
                ).join('\n');
            }
            
            const csvContent = csvHeader + csvRows;
            const blob = new Blob([csvContent], { type: 'text/csv;charset=utf-8;' });
            const url = URL.createObjectURL(blob);
            const link = document.createElement('a');
            
            link.setAttribute('href', url);
            link.setAttribute('download', `${lagerTyp}_lager_${new Date().toISOString().split('T')[0]}.csv`);
            link.style.visibility = 'hidden';
            
            document.body.appendChild(link);
            link.click();
            document.body.removeChild(link);
        }

        function lagerImportieren() {
            document.getElementById('lager-import-file').click();
        }

        async function lagerLeeren() {
            const lagerTyp = aktuellerLagerTab === 'lebensmittel' ? 'Lebensmittel' : 'Material';
            if (confirm(`M√∂chten Sie wirklich das ${lagerTyp}-Lager zur√ºcksetzen? Diese Aktion kann nicht r√ºckg√§ngig gemacht werden.`)) {
                lagerDaten[aktuellerLagerTab] = [];
                await lagerDatenSpeichern();
                lagerAnzeigen();
            }
        }

        // Event Listener f√ºr Datei-Import
        document.getElementById('lager-import-file').addEventListener('change', function(event) {
            const file = event.target.files[0];
            if (!file) return;
            
            const reader = new FileReader();
            reader.onload = function(e) {
                try {
                    const csvText = e.target.result;
                    const lines = csvText.split('\n');
                    const newLagerDaten = [];
                    
                    // Header √ºberspringen (erste Zeile)
                    for (let i = 1; i < lines.length; i++) {
                        const line = lines[i].trim();
                        if (!line) continue;
                        
                        const fields = line.split(',').map(field => 
                            field.replace(/^"|"$/g, '')
                        );
                        
                        if (fields[0] && fields[1]) {
                            const item = {
                                name: fields[0],
                                kategorie: fields[1],
                                einheit: fields[2],
                                menge: parseInt(fields[3]) || 0,
                                mindestmenge: parseInt(fields[4]) || 0,
                                lagerort: fields[6] || 'Standard'
                            };
                            
                            if (aktuellerLagerTab === 'lebensmittel' && fields[5]) {
                                item.haltbarkeit = fields[5];
                            }
                            
                            newLagerDaten.push(item);
                        }
                    }
                    
                    lagerDaten[aktuellerLagerTab] = newLagerDaten;
                    lagerDatenSpeichern();
                    lagerAnzeigen();
                    alert('Lager erfolgreich importiert!');
                    
                } catch (error) {
                    console.error('Fehler beim Importieren:', error);
                    alert('Fehler beim Importieren der CSV-Datei.');
                }
            };
            
            reader.readAsText(file);
            event.target.value = '';
        });

        // CLOUD-FUNKTIONEN
        async function cloudSpeichern() {
            const status = document.getElementById('cloud-status');
            status.innerHTML = '<span style="color: #f39c12;">üîÑ Speichere in Cloud...</span>';
            
            try {
                await lagerDatenSpeichern();
                status.innerHTML = '<span style="color: #27ae60;">‚úÖ Erfolgreich in Cloud gespeichert</span>';
                
                // Status automatisch nach 5 Sekunden zur√ºcksetzen
                setTimeout(() => {
                    if (status.innerHTML.includes('Erfolgreich')) {
                        status.innerHTML = 'Bereit f√ºr n√§chste Synchronisation';
                    }
                }, 5000);
                
            } catch (error) {
                console.error('Cloud-Speichern Fehler:', error);
                status.innerHTML = '<span style="color: #e74c3c;">‚ùå Fehler beim Speichern: ' + error.message + '</span>';
            }
        }

        async function cloudLaden() {
            const status = document.getElementById('cloud-status');
            status.innerHTML = '<span style="color: #f39c12;">üîÑ Lade aus Cloud...</span>';
            
            try {
                await lagerDatenLaden();
                lagerAnzeigen();
                status.innerHTML = '<span style="color: #27ae60;">‚úÖ Daten erfolgreich aus Cloud geladen</span>';
                
                // Status automatisch nach 5 Sekunden zur√ºcksetzen
                setTimeout(() => {
                    if (status.innerHTML.includes('erfolgreich')) {
                        status.innerHTML = 'Bereit f√ºr n√§chste Synchronisation';
                    }
                }, 5000);
                
            } catch (error) {
                console.error('Cloud-Laden Fehler:', error);
                status.innerHTML = '<span style="color: #e74c3c;">‚ùå Fehler beim Laden: ' + error.message + '</span>';
            }
        }

        function cloudStatusPr√ºfen() {
            const status = document.getElementById('cloud-status');
            const lastSync = localStorage.getItem('lastCloudSync');
            
            if (lastSync) {
                const syncDate = new Date(lastSync);
                const now = new Date();
                const diffMinutes = Math.floor((now - syncDate) / (1000 * 60));
                
                let statusText = `<span style="color: #3498db;">üìÖ Letzte Synchronisation: ${syncDate.toLocaleString('de-DE')}</span>`;
                
                if (diffMinutes > 60) {
                    statusText += `<br><span style="color: #e67e22;">‚ö†Ô∏è Letzte Synchronisation vor ${diffMinutes} Minuten</span>`;
                } else {
                    statusText += `<br><span style="color: #27ae60;">‚úÖ Synchronisation aktuell (vor ${diffMinutes} Minuten)</span>`;
                }
                
                status.innerHTML = statusText;
            } else {
                status.innerHTML = '<span style="color: #e67e22;">‚ö†Ô∏è Noch keine Synchronisation durchgef√ºhrt</span>';
            }
        }

        // VERBESSERTE PDF-EXPORT FUNKTION F√úR EINKAUFSLISTE
        function exportEinkaufslistePDF() {
            if (!aktuellesRezept) {
                alert('Bitte w√§hle zuerst ein Rezept aus!');
                return;
            }
        
            const druckContainer = document.getElementById('druck-einkaufsliste-container');
            const lagerOption = document.querySelector('input[name="lager-option"]:checked').value;
            
            const einkaufslisteHTML = aktuellesRezept.zutaten.map(zutat => {
                const mengenBerechnung = berechneBen√∂tigteMenge(zutat, lagerOption);
                const { zuKaufen, ausLager, ben√∂tigt } = mengenBerechnung;
                
                const { menge: anzuzeigendeMenge, einheit: anzuzeigendeEinheit } = konvertiereZuFeldkueche(zuKaufen, zutat.einheit, zutat.name);
                const { menge: lagerMenge, einheit: lagerEinheit } = konvertiereZuFeldkueche(ausLager, zutat.einheit, zutat.name);
                const { menge: gesamtMenge, einheit: gesamtEinheit } = konvertiereZuFeldkueche(ben√∂tigt, zutat.einheit, zutat.name);

                if (lagerOption === 'alles-kaufen') {
                    return `
                        <div style="display: flex; justify-content: space-between; padding: 5px 0; border-bottom: 1px solid #f5f5f5; font-size: 10pt;">
                            <span>${zutat.name}</span>
                            <span style="color: #3498db; font-weight: bold;">${anzuzeigendeMenge} ${anzuzeigendeEinheit}</span>
                        </div>
                    `;
                } else {
                    if (ausLager >= ben√∂tigt) {
                        // Komplett aus Lager
                        return `
                            <div style="display: flex; justify-content: space-between; padding: 5px 0; border-bottom: 1px solid #f5f5f5; font-size: 10pt; background: #e8f6f3;">
                                <span style="text-decoration: line-through; color: #7f8c8d;">${zutat.name}</span>
                                <span style="color: #27ae60; font-weight: bold;">Aus Lager (${gesamtMenge} ${gesamtEinheit})</span>
                            </div>
                        `;
                    } else if (ausLager > 0 && zuKaufen > 0) {
                        // Teilweise aus Lager - KORRIGIERTE PDF-DARSTELLUNG
                        return `
                            <div style="display: flex; justify-content: space-between; padding: 5px 0; border-bottom: 1px solid #f5f5f5; font-size: 10pt; background: #fff3cd;">
                                <div>
                                    <span>${zutat.name}</span>
                                    <div style="font-size: 8pt; color: #666;">
                                        Gesamt: ${gesamtMenge} ${gesamtEinheit} | 
                                        <span style="color: #27ae60;">${lagerMenge} ${lagerEinheit} aus Lager</span> | 
                                        <span style="color: #e74c3c;">${anzuzeigendeMenge} ${anzuzeigendeEinheit} zu kaufen</span>
                                    </div>
                                </div>
                                <span style="color: #3498db; font-weight: bold;">${anzuzeigendeMenge} ${anzuzeigendeEinheit}</span>
                            </div>
                        `;
                    } else {
                        // Gar nicht aus Lager
                        return `
                            <div style="display: flex; justify-content: space-between; padding: 5px 0; border-bottom: 1px solid #f5f5f5; font-size: 10pt;">
                                <span>${zutat.name}</span>
                                <span style="color: #3498db; font-weight: bold;">${anzuzeigendeMenge} ${anzuzeigendeEinheit}</span>
                            </div>
                        `;
                    }
                }
            }).join('');
            
            druckContainer.innerHTML = `
                <div style="font-family: Arial, sans-serif; max-width: 700px; margin: 0 auto; padding: 15px; font-size: 10pt;">
                    <div style="text-align: center; margin-bottom: 15px;">
                        <h2 style="font-size: 16pt; margin-bottom: 5px;">Einkaufsliste</h2>
                        <p style="font-size: 10pt;"><strong>${aktuellesRezept.titel}</strong> f√ºr ${personenAnzahl} Personen</p>
                        <p style="font-size: 9pt; color: #666;">Modus: ${lagerOption === 'alles-kaufen' ? 'Alles neu kaufen' : 'Lager verwenden'}</p>
                    </div>
                    
                    <div style="background: white; padding: 15px; margin-bottom: 12px; border-radius: 3px; border: 1px solid #eee;">
                        <h3 style="color: #2c3e50; font-size: 12pt; margin-bottom: 10px; border-bottom: 1px solid #ecf0f1; padding-bottom: 3px;">
                            Zutaten ${lagerOption === 'lager-verwenden' ? '(mit Lagerabzug)' : ''}
                        </h3>
                        ${einkaufslisteHTML}
                        <div style="display: flex; justify-content: space-between; padding: 8px 0; border-bottom: 1px solid #f5f5f5; font-size: 10pt; background: #e8f4f8; margin-top: 10px; padding: 10px; border-radius: 4px;">
                            <span style="font-weight: bold;">Getr√§nke (Wasser, Saftschorle)</span>
                            <span style="color: #3498db; font-weight: bold;">${personenAnzahl} l</span>
                        </div>
                    </div>

                    <div style="margin-top: 20px; padding-top: 10px; border-top: 1px solid #ddd; font-size: 8pt; color: #666; text-align: center;">
                        <p>Erstellt am: ${new Date().toLocaleString('de-DE')} | Quelle: SEG Feldk√ºche - Katastrophenschutz</p>
                    </div>
                </div>
            `;
        
            druckContainer.style.display = 'block';
            
            setTimeout(() => {
                window.print();
                
                setTimeout(() => {
                    druckContainer.style.display = 'none';
                    druckContainer.innerHTML = '';
                }, 500);
            }, 100);
        }

        // Initialisierung
        document.addEventListener('DOMContentLoaded', function() {
            // Event Listener f√ºr Filter
            document.getElementById('verpflegungsart').addEventListener('change', filterRezepte);
            document.getElementById('verpflegungstyp').addEventListener('change', filterRezepte);
            document.getElementById('vegetarisch').addEventListener('change', filterRezepte);
            
            // Personenanzahl Event-Listener
            document.getElementById('personen').addEventListener('input', function() {
                personenAnzahl = parseInt(this.value) || 1;
                document.getElementById('zutaten-personen').textContent = personenAnzahl;
                document.getElementById('einkauf-personen').textContent = personenAnzahl;
                
                if (aktuellesRezept) {
                    zeigeAusgewaehltesRezept(aktuellesRezept.id);
                }
                
                aktualisiereEinkaufsliste();
            });

            // Navigation
            document.querySelectorAll('.nav-link').forEach(link => {
                link.addEventListener('click', function(e) {
                    e.preventDefault();
                    const pageId = this.getAttribute('data-page');
                    showPage(pageId);
                });
            });

            // Startseite anzeigen
            showPage('rezepte');
            
            // Browser Navigation behandeln
            window.addEventListener('popstate', function() {
                const hash = window.location.hash.replace('#', '') || 'rezepte';
                showPage(hash);
            });

            const initialPage = window.location.hash.replace('#', '') || 'rezepte';
            showPage(initialPage);
            
            // Rezepte initial laden
            filterRezepte();
            
            // Lager initial laden
            lagerDatenLaden().then(() => {
                // Automatisch Cloud-Status pr√ºfen wenn auf Lager-Seite
                if (window.location.hash === '#lager' || !window.location.hash) {
                    setTimeout(cloudStatusPr√ºfen, 1000);
                }
            }).catch(error => {
                console.log('Automatisches Laden fehlgeschlagen, aber lokale Daten verf√ºgbar');
            });
        });

        function showPage(pageId) {
            // Navigation aktualisieren
            document.querySelectorAll('.nav-link').forEach(link => {
                link.classList.remove('active');
                if (link.getAttribute('data-page') === pageId) {
                    link.classList.add('active');
                }
            });

            // Alle Seiten ausblenden
            document.querySelectorAll('.page').forEach(page => {
                page.classList.remove('active');
                page.style.display = 'none';
            });
            
            // Nur die gew√ºnschte Seite anzeigen
            const aktiveSeite = document.getElementById(pageId);
            if (aktiveSeite) {
                aktiveSeite.classList.add('active');
                aktiveSeite.style.display = 'block';
            }

            // URL aktualisieren
            window.history.pushState(null, null, `#${pageId}`);

            // Spezielle Aktionen pro Seite
            if (pageId === 'rezepte') {
                filterRezepte();
            } else if (pageId === 'einkaufsliste') {
                aktualisiereEinkaufsliste();
            } else if (pageId === 'lager') {
                lagerAnzeigen();
            }
        }

        function filterRezepte() {
            const verpflegungsart = document.getElementById('verpflegungsart').value;
            const verpflegungstyp = document.getElementById('verpflegungstyp').value;
            const nurVegetarisch = document.getElementById('vegetarisch').checked;

            const gefilterteRezepte = rezepteDaten.filter(rezept => {
                if (verpflegungsart && rezept.verpflegungsart !== verpflegungsart) return false;
                if (verpflegungstyp && rezept.verpflegungstyp !== verpflegungstyp) return false;
                if (nurVegetarisch && !rezept.vegetarisch) return false;
                return true;
            });

            const grid = document.getElementById('rezepte-grid');
            
            if (gefilterteRezepte.length === 0) {
                grid.innerHTML = '<div class="keine-rezepte">Keine Rezepte gefunden, die den Filterkriterien entsprechen.</div>';
                return;
            }

            grid.innerHTML = gefilterteRezepte.map(rezept => `
                <div class="rezept-karte" onclick="zeigeAusgewaehltesRezept(${rezept.id})">
                    <h4>${rezept.titel}</h4>
                    <div class="rezept-info">
                        <span>${rezept.kalorien} kcal/Person</span>
                        <span>${rezept.basisZeit} min (50 Pers.)</span>
                        <span>${rezept.vegetarisch ? 'Vegetarisch' : 'Mit Fleisch'}</span>
                    </div>
                    <p class="rezept-beschreibung">${rezept.beschreibung}</p>
                </div>
            `).join('');

            document.getElementById('rezept-details').style.display = 'none';
            aktuellesRezept = null;
        }

        function zeigeAusgewaehltesRezept(rezeptId) {
            const rezept = rezepteDaten.find(r => r.id === rezeptId);
            aktuellesRezept = rezept;

            if (!rezept) return;

            // Skalierte Zeit berechnen
            const skalierteZeit = Math.round(rezept.basisZeit * (personenAnzahl / 50));

            // Alle Rezept-Karten zur√ºcksetzen
            document.querySelectorAll('.rezept-karte').forEach(karte => {
                karte.classList.remove('ausgewaehlt');
            });

            // Aktuelle Karte markieren
            document.querySelectorAll('.rezept-karte').forEach(karte => {
                if (karte.querySelector('h4').textContent === rezept.titel) {
                    karte.classList.add('ausgewaehlt');
                }
            });

            // Personenanzahl anzeigen
            document.getElementById('zutaten-personen').textContent = personenAnzahl;

            // Details anzeigen
            document.getElementById('rezept-titel').textContent = rezept.titel;
            document.getElementById('rezept-kalorien').textContent = `${rezept.kalorien * personenAnzahl} kcal gesamt`;
            document.getElementById('rezept-zubereitungszeit').textContent = `${skalierteZeit} min Zubereitung`;
            document.getElementById('rezept-art').textContent = `${rezept.verpflegungsart === 'warm' ? 'Warm' : 'Kalt'} ‚Ä¢ ${rezept.verpflegungstyp === 'voll' ? 'Vollverpflegung' : rezept.verpflegungstyp === 'lunch' ? 'Lunchpakete' : 'Handverpflegung'} ‚Ä¢ ${rezept.vegetarisch ? 'Vegetarisch' : 'Mit Fleisch'}`;

            // Zutaten anzeigen
            const zutatenListe = document.getElementById('rezept-zutaten');
            zutatenListe.innerHTML = rezept.zutaten.map(zutat => {
                const skalierteMenge = (zutat.menge / 50) * personenAnzahl;
                const { menge, einheit } = konvertiereZuFeldkueche(skalierteMenge, zutat.einheit, zutat.name);
                
                return `<li>${menge} ${einheit} ${zutat.name}</li>`;
            }).join('');

            // Zubereitung anzeigen
            const zubereitungListe = document.getElementById('rezept-zubereitung');
            zubereitungListe.innerHTML = rezept.zubereitung.map(schritt => 
                `<li>${schritt}</li>`
            ).join('');

            // Portionierung anzeigen
            document.getElementById('rezept-portionierung').textContent = rezept.portionierung;

            // Details einblenden
            document.getElementById('rezept-details').style.display = 'block';
        }

        function zurEinkaufsliste() {
            if (aktuellesRezept) {
                showPage('einkaufsliste');
            } else {
                alert('Bitte w√§hle zuerst ein Rezept aus!');
            }
        }

        // PDF Export Funktionen (angepasst f√ºr Lagerintegration)
        function exportRezeptPDF() {
            if (!aktuellesRezept) {
                alert('Bitte w√§hle zuerst ein Rezept aus!');
                return;
            }
        
            const skalierteZeit = Math.round(aktuellesRezept.basisZeit * (personenAnzahl / 50));
            const druckContainer = document.getElementById('druck-rezept-container');
            
            const zutatenTabelle = aktuellesRezept.zutaten.map(zutat => {
                const skalierteMenge = (zutat.menge / 50) * personenAnzahl;
                const { menge, einheit } = konvertiereZuFeldkueche(skalierteMenge, zutat.einheit, zutat.name);
                
                return `
                    <tr>
                        <td style="padding: 4px 6px; border-bottom: 1px solid #ddd; font-size: 10pt;">${zutat.name}</td>
                        <td style="padding: 4px 6px; border-bottom: 1px solid #ddd; text-align: right; font-weight: bold; font-size: 10pt;">${menge} ${einheit}</td>
                    </tr>
                `;
            }).join('');
        
            const zubereitungListe = aktuellesRezept.zubereitung.map((schritt, index) => 
                `<li style="margin-bottom: 6px; line-height: 1.3; font-size: 10pt;">${schritt}</li>`
            ).join('');
        
            druckContainer.innerHTML = `
                <div class="druck-rezept" style="font-family: Arial, sans-serif; max-width: 700px; margin: 0 auto; padding: 15px; font-size: 10pt;">
                    <div style="border-bottom: 1px solid #333; padding-bottom: 10px; margin-bottom: 15px;">
                        <h1 style="color: #2c3e50; font-size: 16pt; margin-bottom: 8px; text-align: center;">${aktuellesRezept.titel}</h1>
                        <div style="display: flex; justify-content: center; gap: 15px; font-size: 9pt; color: #666; flex-wrap: wrap;">
                            <span><strong>${aktuellesRezept.kalorien * personenAnzahl} kcal</strong> gesamt</span>
                            <span><strong>${skalierteZeit} min</strong> Zubereitung</span>
                            <span>${aktuellesRezept.verpflegungsart === 'warm' ? 'Warm' : 'Kalt'} ‚Ä¢ ${aktuellesRezept.verpflegungstyp === 'voll' ? 'Vollverpflegung' : aktuellesRezept.verpflegungstyp === 'lunch' ? 'Lunchpakete' : 'Handverpflegung'} ‚Ä¢ ${aktuellesRezept.vegetarisch ? 'Vegetarisch' : 'Mit Fleisch'}</span>
                        </div>
                    </div>
                    
                    <div style="margin-bottom: 20px;">
                        <h2 style="color: #2c3e50; font-size: 12pt; border-bottom: 1px solid #3498db; padding-bottom: 5px; margin-bottom: 10px;">
                            Zutaten f√ºr ${personenAnzahl} Personen
                        </h2>
                        <table style="width: 100%; border-collapse: collapse; font-size: 9pt;">
                            <thead>
                                <tr>
                                    <th style="padding: 6px 8px; border-bottom: 1px solid #3498db; text-align: left; background: #f8f9fa;">Zutat</th>
                                    <th style="padding: 6px 8px; border-bottom: 1px solid #3498db; text-align: right; background: #f8f9fa;">Menge</th>
                                </tr>
                            </thead>
                            <tbody>
                                ${zutatenTabelle}
                            </tbody>
                        </table>
                    </div>
                    
                    <div style="margin-bottom: 20px;">
                        <h2 style="color: #2c3e50; font-size: 12pt; border-bottom: 1px solid #3498db; padding-bottom: 5px; margin-bottom: 10px;">
                            Zubereitung
                        </h2>
                        <ol style="padding-left: 15px; font-size: 10pt; line-height: 1.3;">
                            ${zubereitungListe}
                        </ol>
                    </div>
                    
                    <div style="background: #f8f9fa; padding: 10px; border-radius: 3px; margin-top: 15px; border-left: 3px solid #3498db;">
                        <h3 style="color: #2c3e50; font-size: 11pt; margin-bottom: 5px;">Portionierung & Getr√§nke</h3>
                        <p style="line-height: 1.3; margin: 0; font-size: 9pt;">${aktuellesRezept.portionierung}</p>
                        <p style="line-height: 1.3; margin: 10px 0 0 0; font-size: 9pt; font-weight: bold;">Getr√§nke: ${personenAnzahl} Liter (Wasser, Saftschorle) - 1 Liter pro Person</p>
                    </div>

                    <div style="margin-top: 20px; padding-top: 10px; border-top: 1px solid #ddd; font-size: 8pt; color: #666; text-align: center;">
                        <p>Erstellt am: ${new Date().toLocaleString('de-DE')} | Quelle: SEG Feldk√ºche - Katastrophenschutz</p>
                    </div>
                </div>
            `;
        
            druckContainer.style.display = 'block';
            
            setTimeout(() => {
                window.print();
                
                setTimeout(() => {
                    druckContainer.style.display = 'none';
                    druckContainer.innerHTML = '';
                }, 500);
            }, 100);
        }
    </script>
</body>
</html>
